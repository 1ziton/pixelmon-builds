/**
 * @Based on pixelmon(cipchk@qq.com) v0.2.0
 * (c) 2019 developer(developer@1ziton.com)
 * 
 * Licensed under the MIT license:
 * https://opensource.org/licenses/MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@pixelmon/util"),require("@angular/common"),require("ng-zorro-antd/grid")):"function"==typeof define&&define.amd?define("@pixelmon/chart/radar",["exports","@angular/core","@pixelmon/util","@angular/common","ng-zorro-antd/grid"],t):t(((e=e||self).pixelmon=e.pixelmon||{},e.pixelmon.chart=e.pixelmon.chart||{},e.pixelmon.chart.radar={}),e.ng.core,e.pixelmon.util,e.ng.common,e["ng-zorro-antd/grid"])}(this,function(e,t,n,r,i){"use strict";function o(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}var d=function(){function e(e,t){this.cdr=e,this.ngZone=t,this.legendData=[],this.delay=0,this.height=0,this.padding=[44,30,16,30],this.hasLegend=!0,this.tickCount=4,this.data=[],this.colors=["#1890FF","#FACC14","#2FC25B","#8543E0","#F04864","#13C2C2","#fa8c16","#a0d911"]}return e.prototype.getHeight=function(){return this.height-(this.hasLegend?80:22)},e.prototype.install=function(){var e=this,t=this.node,n=this.padding,r=this.chart=new G2.Chart({container:t.nativeElement,forceFit:!0,height:this.getHeight(),padding:n});r.coord("polar"),r.legend(!1),r.axis("label",{line:null,labelOffset:8,labels:{label:{fill:"rgba(0, 0, 0, .65)"}},grid:{line:{stroke:"#e9e9e9",lineWidth:1,lineDash:[0,0]}}}),r.axis("value",{grid:{type:"polygon",line:{stroke:"#e9e9e9",lineWidth:1,lineDash:[0,0]}},labels:{label:{fill:"rgba(0, 0, 0, .65)"}}}),r.filter("name",function(t){var n=e.legendData.find(function(e){return e.name===t});return!n||!1!==n.checked}),r.line().position("label*value"),r.point().position("label*value").shape("circle").size(3),r.render(),this.attachChart()},e.prototype.attachChart=function(){var e=this,t=this,n=t.chart,r=t.padding,i=t.data,o=t.colors,a=t.tickCount;!n||!i||i.length<=0||(n.set("height",this.getHeight()),n.set("padding",r),n.source(i,{value:{min:0,tickCount:a}}),n.get("geoms").forEach(function(e){e.color("name",o)}),n.repaint(),this.ngZone.run(function(){return e.genLegend()}))},e.prototype.genLegend=function(){var e=this.hasLegend,t=this.cdr,n=this.chart;e&&(this.legendData=n.get("geoms")[0].get("dataArray").map(function(e){return{name:e[0]._origin.name,color:e[0].color,checked:!0,value:e.reduce(function(e,t){return e+t._origin.value},0)}}),t.detectChanges())},e.prototype._click=function(e){var t=this.legendData,n=this.chart;t[e].checked=!t[e].checked,n.repaint()},e.prototype.ngOnInit=function(){var e=this;this.ngZone.runOutsideAngular(function(){return setTimeout(function(){return e.install()},e.delay)})},e.prototype.ngOnChanges=function(){var e=this;this.legendData.forEach(function(e){return e.checked=!0}),this.ngZone.runOutsideAngular(function(){return e.attachChart()})},e.prototype.ngOnDestroy=function(){var e=this;this.chart&&this.ngZone.runOutsideAngular(function(){return e.chart.destroy()})},e.decorators=[{type:t.Component,args:[{selector:"g2-radar",exportAs:"g2Radar",template:'<ng-container *stringTemplateOutlet="title">\n  <h4>{{title}}</h4>\n</ng-container>\n<div #container></div>\n<div nz-row\n     class="g2-radar__legend"\n     *ngIf="hasLegend">\n  <div nz-col\n       [nzSpan]="24 / legendData.length"\n       *ngFor="let i of legendData; let idx = index"\n       (click)="_click(idx)"\n       class="g2-radar__legend-item">\n    <i class="g2-radar__legend-dot"\n       [ngStyle]="{\'background-color\': !i.checked ? \'#aaa\' : i.color}"></i>\n    {{i.name}}\n    <h6 class="g2-radar__legend-title">{{i.value}}</h6>\n  </div>\n</div>\n',host:{"[style.height.px]":"height","[class.g2-radar]":"true"},preserveWhitespaces:!1,changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:t.NgZone}]},e.propDecorators={node:[{type:t.ViewChild,args:["container",{static:!0}]}],delay:[{type:t.Input}],title:[{type:t.Input}],height:[{type:t.Input}],padding:[{type:t.Input}],hasLegend:[{type:t.Input}],tickCount:[{type:t.Input}],data:[{type:t.Input}],colors:[{type:t.Input}]},o([n.InputNumber(),a("design:type",Object)],e.prototype,"delay",void 0),o([n.InputNumber(),a("design:type",Object)],e.prototype,"height",void 0),o([n.InputBoolean(),a("design:type",Object)],e.prototype,"hasLegend",void 0),o([n.InputNumber(),a("design:type",Object)],e.prototype,"tickCount",void 0),e}();var u=[d],s=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule,n.PixelmonUtilModule,i.NzGridModule],declarations:c(u),exports:c(u)}]}],e}();e.G2RadarComponent=d,e.G2RadarModule=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=radar.umd.min.js.map