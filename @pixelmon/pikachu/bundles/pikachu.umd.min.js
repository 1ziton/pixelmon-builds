/**
 * @license ng-alain(cipchk@qq.com) v0.1.4
 * (c) 2019 giscafer(giscafer@outlook.com)
 * License: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@pixelmon/pikachu/lodop"),require("@pixelmon/pikachu/reuse-tab"),require("@pixelmon/pikachu/notice-icon"),require("@pixelmon/pikachu/sidebar-nav"),require("@pixelmon/pikachu/view"),require("@pixelmon/pikachu/page-header"),require("@pixelmon/pikachu/advanced-table"),require("@angular/core"),require("@pixelmon/theme"),require("@pixelmon/util"),require("@angular/common"),require("ng-zorro-antd/badge"),require("ng-zorro-antd/dropdown"),require("ng-zorro-antd/icon"),require("ng-zorro-antd/list"),require("ng-zorro-antd/spin"),require("ng-zorro-antd/tabs"),require("ng-zorro-antd/tag"),require("@angular/router"),require("ng-zorro-antd/affix"),require("rxjs"),require("rxjs/operators"),require("ng-zorro-antd/breadcrumb"),require("ng-zorro-antd/skeleton"),require("@angular/cdk/overlay"),require("@angular/cdk/portal"),require("ng-zorro-antd/menu"),require("ng-zorro-antd/tooltip"),require("@angular/cdk/observers"),require("ng-zorro-antd"),require("@angular/forms"),require("@pixelmon/pikachu/viewer"),require("@pixelmon/pikachu/smart-text")):"function"==typeof define&&define.amd?define("@pixelmon/pikachu",["exports","@pixelmon/pikachu/lodop","@pixelmon/pikachu/reuse-tab","@pixelmon/pikachu/notice-icon","@pixelmon/pikachu/sidebar-nav","@pixelmon/pikachu/view","@pixelmon/pikachu/page-header","@pixelmon/pikachu/advanced-table","@angular/core","@pixelmon/theme","@pixelmon/util","@angular/common","ng-zorro-antd/badge","ng-zorro-antd/dropdown","ng-zorro-antd/icon","ng-zorro-antd/list","ng-zorro-antd/spin","ng-zorro-antd/tabs","ng-zorro-antd/tag","@angular/router","ng-zorro-antd/affix","rxjs","rxjs/operators","ng-zorro-antd/breadcrumb","ng-zorro-antd/skeleton","@angular/cdk/overlay","@angular/cdk/portal","ng-zorro-antd/menu","ng-zorro-antd/tooltip","@angular/cdk/observers","ng-zorro-antd","@angular/forms","@pixelmon/pikachu/viewer","@pixelmon/pikachu/smart-text"],t):t(((e=e||self).pixelmon=e.pixelmon||{},e.pixelmon.pikachu={}),e.pixelmon.pikachu.lodop,e.pixelmon.pikachu["reuse-tab"],e.pixelmon.pikachu["notice-icon"],e.pixelmon.pikachu["sidebar-nav"],e.pixelmon.pikachu.view,e.pixelmon.pikachu["page-header"],e.pixelmon.pikachu["advanced-table"],e.ng.core,e.theme,e.util,e.ng.common,e.badge,e.dropdown,e.icon,e.list,e.spin,e.tabs,e.tag,e.ng.router,e.affix,e.rxjs,e.rxjs.operators,e.breadcrumb,e.skeleton,e.ng.cdk.overlay,e.ng.cdk.portal,e.menu,e.tooltip,e.ng.cdk.observers,e.ngZorroAntd,e.ng.forms,e.pixelmon.pikachu.viewer,e.pixelmon.pikachu["smart-text"])}(this,function(e,t,n,i,o,r,a,l,s,c,u,p,d,h,g,f,m,y,b,v,x,C,_,z,I,S,k,T,O,w,P,M,R,E){"use strict";var j=function(){return(j=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function D(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}function N(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function B(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function V(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(B(arguments[t]));return e}var L=function(){function e(){this.locale={},this.select=new s.EventEmitter,this.clear=new s.EventEmitter}return e.prototype.onClick=function(e){this.select.emit({title:this.data.title,item:e})},e.prototype.onClear=function(){this.clear.emit(this.data.title)},e.decorators=[{type:s.Component,args:[{selector:"notice-icon-tab",exportAs:"noticeIconTab",template:'<div *ngIf="data.list?.length === 0; else listTpl" class="notice-icon__notfound">\n  <img class="notice-icon__notfound-img" *ngIf="data.emptyImage" src="{{data.emptyImage}}" alt="not found" />\n  <p>{{data.emptyText || locale.emptyText}}</p>\n</div>\n<ng-template #listTpl>\n  <nz-list [nzDataSource]="data.list" [nzRenderItem]="item">\n    <ng-template #item let-item>\n      <nz-list-item (click)="onClick(item)" [ngClass]="{\'notice-icon__item-read\': item.read}">\n        <nz-list-item-meta [nzTitle]="nzTitle" [nzDescription]="nzDescription" [nzAvatar]="item.avatar">\n          <ng-template #nzTitle>\n            {{item.title}}\n            <div class="notice-icon__item-extra" *ngIf="item.extra">\n              <nz-tag [nzColor]="item.color">{{item.extra}}</nz-tag>\n            </div>\n          </ng-template>\n          <ng-template #nzDescription>\n            <div *ngIf="item.description" class="notice-icon__item-desc">{{item.description}}</div>\n            <div *ngIf="item.datetime" class="notice-icon__item-time">{{item.datetime}}</div>\n          </ng-template>\n        </nz-list-item-meta>\n      </nz-list-item>\n    </ng-template>\n  </nz-list>\n  <div class="notice-icon__clear" (click)="onClear()">{{ data.clearText || locale.clearText }}</div>\n</ng-template>\n',preserveWhitespaces:!1,encapsulation:s.ViewEncapsulation.None}]}],e.propDecorators={locale:[{type:s.Input}],data:[{type:s.Input}],select:[{type:s.Output}],clear:[{type:s.Output}]},e}();var A=function(){function e(e,t){this.i18n=e,this.cdr=t,this.locale={},this.data=[],this.loading=!1,this.popoverVisible=!1,this.btnClass="",this.btnIconClass="",this.select=new s.EventEmitter,this.clear=new s.EventEmitter,this.popoverVisibleChange=new s.EventEmitter}return e.prototype.onVisibleChange=function(e){this.popoverVisibleChange.emit(e)},e.prototype.onSelect=function(e){this.select.emit(e)},e.prototype.onClear=function(e){this.clear.emit(e)},e.prototype.ngOnInit=function(){var e=this;this.i18n$=this.i18n.change.subscribe(function(){e.locale=e.i18n.getData("noticeIcon"),e.cdr.markForCheck()})},e.prototype.ngOnChanges=function(){this.cdr.markForCheck()},e.prototype.ngOnDestroy=function(){this.i18n$.unsubscribe()},e.decorators=[{type:s.Component,args:[{selector:"notice-icon",exportAs:"noticeIcon",template:'<ng-template #badgeTpl>\n  <nz-badge [nzCount]="count" [ngClass]="btnClass" [nzStyle]="{ \'box-shadow\': \'none\' }">\n    <i nz-icon nzType="bell" [ngClass]="btnIconClass"></i>\n  </nz-badge>\n</ng-template>\n<div *ngIf="data?.length === 0">\n  <ng-template [ngTemplateOutlet]="badgeTpl"></ng-template>\n</div>\n<div *ngIf="data?.length > 0" nz-dropdown\n    [nzVisible]="popoverVisible"\n    (nzVisibleChange)="onVisibleChange($event)"\n    nzTrigger="click"\n    nzPlacement="bottomRight"\n    [nzOverlayClassName]="[\'header-dropdown\', \'notice-icon\']"\n    [nzDropdownMenu]="noticeMenu">\n  <ng-template [ngTemplateOutlet]="badgeTpl"></ng-template>\n</div>\n<nz-dropdown-menu #noticeMenu="nzDropdownMenu">\n  <nz-spin [nzSpinning]="loading" [nzDelay]="0">\n    <nz-tabset nzSelectedIndex="0">\n      <nz-tab *ngFor="let i of data" [nzTitle]="i.title">\n        <notice-icon-tab [locale]="locale" [data]="i" (select)="onSelect($event)" (clear)="onClear($event)"></notice-icon-tab>\n      </nz-tab>\n    </nz-tabset>\n  </nz-spin>\n</nz-dropdown-menu>\n',host:{"[class.notice-icon__btn]":"true"},preserveWhitespaces:!1,changeDetection:s.ChangeDetectionStrategy.OnPush,encapsulation:s.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:c.PixelmonLocaleService},{type:s.ChangeDetectorRef}]},e.propDecorators={data:[{type:s.Input}],count:[{type:s.Input}],loading:[{type:s.Input}],popoverVisible:[{type:s.Input}],btnClass:[{type:s.Input}],btnIconClass:[{type:s.Input}],select:[{type:s.Output}],clear:[{type:s.Output}],popoverVisibleChange:[{type:s.Output}]},D([u.InputNumber(),N("design:type",Number)],e.prototype,"count",void 0),D([u.InputBoolean(),N("design:type",Object)],e.prototype,"loading",void 0),D([u.InputBoolean(),N("design:type",Object)],e.prototype,"popoverVisible",void 0),e}();var U=[A],$=function(){function e(){}return e.decorators=[{type:s.NgModule,args:[{imports:[p.CommonModule,c.PixelmonLocaleModule,d.NzBadgeModule,h.NzDropDownModule,g.NzIconModule,f.NzListModule,m.NzSpinModule,y.NzTabsModule,b.NzTagModule],declarations:V(U,[L]),exports:V(U)}]}],e}(),F=function(){function e(){this.home="首页",this.homeLink="/",this.autoBreadcrumb=!0,this.recursiveBreadcrumb=!1,this.autoTitle=!0,this.syncTitle=!1,this.fixed=!1,this.fixedOffsetTop=64}return e.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=s.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();var q=function(){function e(e,t,n,i,o,r,a,l,s){var c=this;this.renderer=n,this.router=i,this.menuSrv=o,this.i18nSrv=r,this.titleSrv=a,this.reuseSrv=l,this.cdr=s,this.inited=!1,this.unsubscribe$=new C.Subject,this._titleVal="",this.paths=[],this.loading=!1,this.wide=!1,Object.assign(this,j({},new F,e)),t.notify.pipe(_.takeUntil(this.unsubscribe$),_.filter(function(e){return c.affix&&"layout"===e.type&&"collapsed"===e.name})).subscribe(function(){return c.affix.updatePosition({})}),C.merge(o.change.pipe(_.filter(function(){return c.inited})),i.events.pipe(_.filter(function(e){return e instanceof v.NavigationEnd})),r.change).pipe(_.takeUntil(this.unsubscribe$)).subscribe(function(){c._menus=null,c.refresh()})}return Object.defineProperty(e.prototype,"menus",{get:function(){return this._menus?this._menus:(this._menus=this.menuSrv.getPathByUrl(this.router.url.split("?")[0],this.recursiveBreadcrumb),this._menus)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{set:function(e){e instanceof s.TemplateRef?(this._title=null,this._titleTpl=e,this._titleVal=""):(this._title=e,this._titleVal=this._title)},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){this.setTitle().genBreadcrumb(),this.cdr.detectChanges()},e.prototype.genBreadcrumb=function(){var e=this;if(!(this.breadcrumb||!this.autoBreadcrumb||this.menus.length<=0)){var t=[];return this.menus.forEach(function(n){if(void 0===n.hideInBreadcrumb||!n.hideInBreadcrumb){var i=n.text;n.i18n&&e.i18nSrv&&(i=e.i18nSrv.fanyi(n.i18n)),t.push({title:i,link:n.link&&[n.link]})}}),this.home&&t.splice(0,0,{title:this.homeI18n&&this.i18nSrv&&this.i18nSrv.fanyi(this.homeI18n)||this.home,link:[this.homeLink]}),this.paths=t,this}this.paths=[]},e.prototype.setTitle=function(){if(null==this._title&&null==this._titleTpl&&this.autoTitle&&this.menus.length>0){var e=this.menus[this.menus.length-1],t=e.text;e.i18n&&this.i18nSrv&&(t=this.i18nSrv.fanyi(e.i18n)),this._titleVal=t}return this._titleVal&&this.syncTitle&&(this.titleSrv&&this.titleSrv.setTitle(this._titleVal),this.reuseSrv&&(this.reuseSrv.title=this._titleVal)),this},e.prototype.checkContent=function(){u.isEmpty(this.conTpl.nativeElement)?this.renderer.setAttribute(this.conTpl.nativeElement,"hidden",""):this.renderer.removeAttribute(this.conTpl.nativeElement,"hidden")},e.prototype.ngOnInit=function(){this.refresh(),this.inited=!0},e.prototype.ngAfterViewInit=function(){this.checkContent()},e.prototype.ngOnChanges=function(){this.inited&&this.refresh()},e.prototype.ngOnDestroy=function(){var e=this.unsubscribe$;e.next(),e.complete()},e.decorators=[{type:s.Component,args:[{selector:"page-header",exportAs:"pageHeader",template:'<nz-affix #affixEl\n          *ngIf="fixed;else phTpl"\n          [nzOffsetTop]="fixedOffsetTop">\n  <ng-template [ngTemplateOutlet]="phTpl"></ng-template>\n</nz-affix>\n<ng-template #phTpl>\n  <div class="page-header">\n    <div [ngClass]="{\'page-header__wide\': wide}">\n      <nz-skeleton [nzLoading]="loading"\n                   [nzTitle]="false"\n                   [nzActive]="true"\n                   [nzParagraph]="{rows: 3}"\n                   [nzAvatar]="{ size: \'large\', shape: \'circle\' }">\n        <ng-container *ngIf="!breadcrumb; else breadcrumb">\n          <nz-breadcrumb *ngIf="paths && paths.length > 0">\n            <nz-breadcrumb-item *ngFor="let i of paths">\n              <ng-container *ngIf="i.link">\n                <a [routerLink]="i.link">{{i.title}}</a>\n              </ng-container>\n              <ng-container *ngIf="!i.link">{{i.title}}</ng-container>\n            </nz-breadcrumb-item>\n          </nz-breadcrumb>\n        </ng-container>\n        <div class="page-header__detail">\n          <div *ngIf="logo"\n               class="page-header__logo">\n            <ng-template [ngTemplateOutlet]="logo"></ng-template>\n          </div>\n          <div class="page-header__main">\n            <div class="page-header__row">\n              <h1 *ngIf="_titleVal || _titleTpl"\n                  class="page-header__title">\n                <ng-container *ngIf="_titleVal; else _titleTpl">{{_titleVal}}</ng-container>\n              </h1>\n              <div *ngIf="action"\n                   class="page-header__action">\n                <ng-template [ngTemplateOutlet]="action"></ng-template>\n              </div>\n            </div>\n            <div class="page-header__row">\n              <div class="page-header__desc"\n                   (cdkObserveContent)="checkContent()"\n                   #conTpl>\n                <ng-content></ng-content>\n                <ng-template [ngTemplateOutlet]="content"></ng-template>\n              </div>\n              <div *ngIf="extra"\n                   class="page-header__extra">\n                <ng-template [ngTemplateOutlet]="extra"></ng-template>\n              </div>\n            </div>\n          </div>\n        </div>\n        <ng-template [ngTemplateOutlet]="tab"></ng-template>\n      </nz-skeleton>\n    </div>\n  </div>\n</ng-template>\n',preserveWhitespaces:!1,changeDetection:s.ChangeDetectionStrategy.OnPush,encapsulation:s.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:F},{type:c.SettingsService},{type:s.Renderer2},{type:v.Router},{type:c.MenuService},{type:void 0,decorators:[{type:s.Optional},{type:s.Inject,args:[c.PIXELMON_I18N_TOKEN]}]},{type:c.TitleService,decorators:[{type:s.Optional},{type:s.Inject,args:[c.TitleService]}]},{type:n.ReuseTabService,decorators:[{type:s.Optional},{type:s.Inject,args:[n.ReuseTabService]}]},{type:s.ChangeDetectorRef}]},e.propDecorators={conTpl:[{type:s.ViewChild,args:["conTpl",{static:!1}]}],affix:[{type:s.ViewChild,args:["affixEl",{static:!1}]}],title:[{type:s.Input}],loading:[{type:s.Input}],wide:[{type:s.Input}],home:[{type:s.Input}],homeLink:[{type:s.Input}],homeI18n:[{type:s.Input}],autoBreadcrumb:[{type:s.Input}],autoTitle:[{type:s.Input}],syncTitle:[{type:s.Input}],fixed:[{type:s.Input}],fixedOffsetTop:[{type:s.Input}],breadcrumb:[{type:s.Input}],recursiveBreadcrumb:[{type:s.Input}],logo:[{type:s.Input}],action:[{type:s.Input}],content:[{type:s.Input}],extra:[{type:s.Input}],tab:[{type:s.Input}]},D([u.InputBoolean(),N("design:type",Object)],e.prototype,"loading",void 0),D([u.InputBoolean(),N("design:type",Object)],e.prototype,"wide",void 0),D([u.InputBoolean(),N("design:type",Boolean)],e.prototype,"autoBreadcrumb",void 0),D([u.InputBoolean(),N("design:type",Boolean)],e.prototype,"autoTitle",void 0),D([u.InputBoolean(),N("design:type",Boolean)],e.prototype,"syncTitle",void 0),D([u.InputBoolean(),N("design:type",Boolean)],e.prototype,"fixed",void 0),D([u.InputNumber(),N("design:type",Number)],e.prototype,"fixedOffsetTop",void 0),D([u.InputBoolean(),N("design:type",Boolean)],e.prototype,"recursiveBreadcrumb",void 0),e}();var H=[q],W=function(){function e(){}return e.decorators=[{type:s.NgModule,args:[{imports:[p.CommonModule,v.RouterModule,u.PixelmonUtilModule,x.NzAffixModule,I.NzSkeletonModule,z.NzBreadCrumbModule],declarations:V(H),exports:V(H)}]}],e}(),Z=function(){function e(e){this.i18nSrv=e,this.close=new s.EventEmitter}return Object.defineProperty(e.prototype,"i18n",{get:function(){return this._i18n},set:function(e){this._i18n=j({},this.i18nSrv.getData("reuseTab"),e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"includeNonCloseable",{get:function(){return this.event.ctrlKey},enumerable:!0,configurable:!0}),e.prototype.notify=function(e){this.close.next({type:e,item:this.item,includeNonCloseable:this.includeNonCloseable})},e.prototype.ngOnInit=function(){this.includeNonCloseable&&(this.item.closable=!0)},e.prototype.click=function(e,t,n){if(e.preventDefault(),e.stopPropagation(),("close"!==t||this.item.closable)&&("closeRight"!==t||!this.item.last)){if(n){if(this.isDisabled(n))return;n.fn(this.item,n)}this.notify(t)}},e.prototype.isDisabled=function(e){return!!e.disabled&&e.disabled(this.item)},e.prototype.closeMenu=function(e){"click"===e.type&&2===e.button||this.notify(null)},e.decorators=[{type:s.Component,args:[{selector:"reuse-tab-context-menu",template:'<ul nz-menu>\n  <li nz-menu-item\n      (click)="click($event, \'close\')"\n      data-type="close"\n      [nzDisabled]="!item.closable"\n      [innerHTML]="i18n.close"></li>\n  <li nz-menu-item\n      (click)="click($event, \'closeOther\')"\n      data-type="closeOther"\n      [innerHTML]="i18n.closeOther"></li>\n  <li nz-menu-item\n      (click)="click($event, \'closeRight\')"\n      data-type="closeRight"\n      [nzDisabled]="item.last"\n      [innerHTML]="i18n.closeRight"></li>\n  <li nz-menu-item\n      (click)="click($event, \'clear\')"\n      data-type="clear"\n      [innerHTML]="i18n.clear"></li>\n  <ng-container *ngIf="customContextMenu!.length > 0">\n    <li nz-menu-divider></li>\n    <li *ngFor="let i of customContextMenu"\n        nz-menu-item\n        [attr.data-type]="i.id"\n        [nzDisabled]="isDisabled(i)"\n        (click)="click($event, \'custom\', i)"\n        [innerHTML]="i.title"></li>\n  </ng-container>\n</ul>\n',host:{"(document:click)":"closeMenu($event)","(document:contextmenu)":"closeMenu($event)"},preserveWhitespaces:!1,changeDetection:s.ChangeDetectionStrategy.OnPush,encapsulation:s.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:c.PixelmonLocaleService}]},e.propDecorators={i18n:[{type:s.Input}],item:[{type:s.Input}],event:[{type:s.Input}],customContextMenu:[{type:s.Input}],close:[{type:s.Output}]},e}();var K=function(){function e(e){this.overlay=e,this.show=new C.Subject,this.close=new C.Subject}return e.prototype.remove=function(){this.ref&&(this.ref.detach(),this.ref.dispose(),this.ref=null)},e.prototype.open=function(e){var t=this;this.remove();var n=e.event,i=e.item,o=e.customContextMenu,r=new s.ElementRef({getBoundingClientRect:function(){return{bottom:n.clientY,height:0,left:n.clientX,right:n.clientX,top:n.clientY,width:0}}}),a=[new S.ConnectionPositionPair({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),new S.ConnectionPositionPair({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"})],l=this.overlay.position().flexibleConnectedTo(r).withPositions(a);this.ref=this.overlay.create({positionStrategy:l,panelClass:"reuse-tab__cm",scrollStrategy:this.overlay.scrollStrategies.close()});var c=this.ref.attach(new k.ComponentPortal(Z)),u=c.instance;u.i18n=this.i18n,u.item=j({},i),u.customContextMenu=o,u.event=n;var p=new C.Subscription;p.add(u.close.subscribe(function(e){t.close.next(e),t.remove()})),c.onDestroy(function(){return p.unsubscribe()})},e.decorators=[{type:s.Injectable}],e.ctorParameters=function(){return[{type:S.Overlay}]},e}();var X=function(){function e(e){var t=this;this.srv=e,this.sub$=new C.Subscription,this.change=new s.EventEmitter,this.sub$.add(e.show.subscribe(function(e){return t.srv.open(e)})),this.sub$.add(e.close.subscribe(function(e){return t.change.emit(e)}))}return Object.defineProperty(e.prototype,"i18n",{set:function(e){this.srv.i18n=e},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.sub$.unsubscribe()},e.decorators=[{type:s.Component,args:[{selector:"reuse-tab-context",template:""}]}],e.ctorParameters=function(){return[{type:K}]},e.propDecorators={i18n:[{type:s.Input}],change:[{type:s.Output}]},e}();var Y=function(){function e(e){this.srv=e}return e.prototype._onContextMenu=function(e){this.srv.show.next({event:e,item:this.item,customContextMenu:this.customContextMenu}),e.preventDefault(),e.stopPropagation()},e.decorators=[{type:s.Directive,args:[{selector:"[reuse-tab-context-menu]",exportAs:"reuseTabContextMenu",host:{"(contextmenu)":"_onContextMenu($event)"}}]}],e.ctorParameters=function(){return[{type:K}]},e.propDecorators={item:[{type:s.Input,args:["reuse-tab-context-menu"]}],customContextMenu:[{type:s.Input}]},e}();var G={Menu:0,MenuForce:1,URL:2};G[G.Menu]="Menu",G[G.MenuForce]="MenuForce",G[G.URL]="URL";var J=function(){function e(e,t){this.injector=e,this.menuService=t,this._inited=!1,this._max=10,this._keepingScroll=!1,this._cachedChange=new C.BehaviorSubject(null),this._cached=[],this._titleCached={},this._closableCached={},this.positionBuffer={},this.debug=!1,this.mode=G.Menu,this.excludes=[]}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return this.injector.get(v.ActivatedRoute).snapshot},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inited",{get:function(){return this._inited},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curUrl",{get:function(){return this.getUrl(this.snapshot)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{set:function(e){this._max=Math.min(Math.max(e,2),100);for(var t=this._cached.length;t>this._max;t--)this._cached.pop()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keepingScroll",{get:function(){return this._keepingScroll},set:function(e){this._keepingScroll=e,this.initScroll()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._cached},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._cached.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"change",{get:function(){return this._cachedChange.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{set:function(e){var t=this.curUrl;"string"==typeof e&&(e={text:e}),this._titleCached[t]=e,this.di("update current tag title: ",e),this._cachedChange.next({active:"title",title:e,list:this._cached})},enumerable:!0,configurable:!0}),e.prototype.index=function(e){return this._cached.findIndex(function(t){return t.url===e})},e.prototype.exists=function(e){return-1!==this.index(e)},e.prototype.get=function(e){return e&&this._cached.find(function(t){return t.url===e})||null},e.prototype.remove=function(e,t){var n="string"==typeof e?this.index(e):e,i=-1!==n?this._cached[n]:null;return!(!i||!t&&!i.closable)&&(this.destroy(i._handle),this._cached.splice(n,1),delete this._titleCached[e],!0)},e.prototype.close=function(e,t){return void 0===t&&(t=!1),this.removeUrlBuffer=e,this.remove(e,t),this._cachedChange.next({active:"close",url:e,list:this._cached}),this.di("close tag",e),!0},e.prototype.closeRight=function(e,t){void 0===t&&(t=!1);for(var n=this.index(e),i=this.count-1;i>n;i--)this.remove(i,t);return this.removeUrlBuffer=null,this._cachedChange.next({active:"closeRight",url:e,list:this._cached}),this.di("close right tages",e),!0},e.prototype.clear=function(e){var t=this;void 0===e&&(e=!1),this._cached.forEach(function(n){!e&&n.closable&&t.destroy(n._handle)}),this._cached=this._cached.filter(function(t){return!e&&!t.closable}),this.removeUrlBuffer=null,this._cachedChange.next({active:"clear",list:this._cached}),this.di("clear all catch")},e.prototype.move=function(e,t){var n=this._cached.findIndex(function(t){return t.url===e});if(-1!==n){var i=this._cached.slice();i.splice(t<0?i.length+t:t,0,i.splice(n,1)[0]),this._cached=i,this._cachedChange.next({active:"move",url:e,position:t,list:this._cached})}},e.prototype.replace=function(e){var t=this.curUrl;this.exists(t)?this.close(t,!0):this.removeUrlBuffer=t,this.injector.get(v.Router).navigateByUrl(e)},e.prototype.getTitle=function(e,t){if(this._titleCached[e])return this._titleCached[e];if(t&&t.data&&(t.data.titleI18n||t.data.title))return{text:t.data.title,i18n:t.data.titleI18n};var n=this.mode!==G.URL?this.getMenu(e):null;return n?{text:n.text,i18n:n.i18n}:{text:e}},e.prototype.clearTitleCached=function(){this._titleCached={}},Object.defineProperty(e.prototype,"closable",{set:function(e){var t=this.curUrl;this._closableCached[t]=e,this.di("update current tag closable: ",e),this._cachedChange.next({active:"closable",closable:e,list:this._cached})},enumerable:!0,configurable:!0}),e.prototype.getClosable=function(e,t){if(void 0!==this._closableCached[e])return this._closableCached[e];if(t&&t.data&&"boolean"==typeof t.data.reuseClosable)return t.data.reuseClosable;var n=this.mode!==G.URL?this.getMenu(e):null;return!n||"boolean"!=typeof n.reuseClosable||n.reuseClosable},e.prototype.clearClosableCached=function(){this._closableCached={}},e.prototype.getTruthRoute=function(e){for(var t=e;t.firstChild;)t=t.firstChild;return t},e.prototype.getUrl=function(e){for(var t=this.getTruthRoute(e),n=[];t;)n.push(t.url.join("/")),t=t.parent;return"/"+n.filter(function(e){return e}).reverse().join("/")},e.prototype.can=function(e){var t=this.getUrl(e);if(t===this.removeUrlBuffer)return!1;if(e.data&&"boolean"==typeof e.data.reuse)return e.data.reuse;if(this.mode!==G.URL){var n=this.getMenu(t);if(!n)return!1;if(this.mode===G.Menu){if(!1===n.reuse)return!1}else if(!n.reuse||!0!==n.reuse)return!1;return!0}return-1===this.excludes.findIndex(function(e){return e.test(t)})},e.prototype.refresh=function(e){this._cachedChange.next({active:"refresh",data:e})},e.prototype.destroy=function(e){e&&e.componentRef&&e.componentRef.destroy&&e.componentRef.destroy()},e.prototype.di=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.debug&&console.warn.apply(console,V(e))},e.prototype.init=function(){this.initScroll(),this._inited=!0},e.prototype.getMenu=function(e){var t=this.menuService.getPathByUrl(e);return t&&0!==t.length?t.pop():null},e.prototype.runHook=function(e,t,n){n.instance&&"function"==typeof n.instance[e]&&n.instance[e]()},e.prototype.hasInValidRoute=function(e){return!e.routeConfig||e.routeConfig.loadChildren||e.routeConfig.children},e.prototype.shouldDetach=function(e){return!this.hasInValidRoute(e)&&(this.di("#shouldDetach",this.can(e),this.getUrl(e)),this.can(e))},e.prototype.store=function(e,t){var n=this.getUrl(e),i=this.index(n),o={title:this.getTitle(n,e),closable:this.getClosable(n,e),position:this.getKeepingScroll(n,e)?this.positionBuffer[n]:null,url:n,_snapshot:e,_handle:t};if(-1===i){if(this.count>=this._max){var r=this._cached.findIndex(function(e){return e.closable});-1!==r&&this.remove(r,!1)}this._cached.push(o)}else this._cached[i]=o;this.removeUrlBuffer=null,this.di("#store",-1===i?"[new]":"[override]",n),t&&t.componentRef&&this.runHook("_onReuseDestroy",n,t.componentRef),this._cachedChange.next({active:"add",item:o,list:this._cached})},e.prototype.shouldAttach=function(e){if(this.hasInValidRoute(e))return!1;var t=this.getUrl(e),n=this.get(t),i=!(!n||!n._handle);return this.di("#shouldAttach",i,t),i&&n._handle.componentRef&&this.runHook("_onReuseInit",t,n._handle.componentRef),i},e.prototype.retrieve=function(e){if(this.hasInValidRoute(e))return null;var t=this.getUrl(e),n=this.get(t),i=n&&n._handle||null;return this.di("#retrieve",t,i),i},e.prototype.shouldReuseRoute=function(e,t){var n=e.routeConfig===t.routeConfig;if(!n)return!1;var i=e.routeConfig&&e.routeConfig.path||"";i.length>0&&~i.indexOf(":")&&(n=this.getUrl(e)===this.getUrl(t));return this.di("====================="),this.di("#shouldReuseRoute",n,this.getUrl(t)+"=>"+this.getUrl(e),e,t),n},e.prototype.getKeepingScroll=function(e,t){if(t&&t.data&&"boolean"==typeof t.data.keepingScroll)return t.data.keepingScroll;var n=this.mode!==G.URL?this.getMenu(e):null;return n&&"boolean"==typeof n.keepingScroll?n.keepingScroll:this.keepingScroll},Object.defineProperty(e.prototype,"isDisabledInRouter",{get:function(){return"disabled"===this.injector.get(v.ROUTER_CONFIGURATION,{}).scrollPositionRestoration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ss",{get:function(){return this.injector.get(c.ScrollService)},enumerable:!0,configurable:!0}),e.prototype.initScroll=function(){var e=this;this._router$&&this._router$.unsubscribe(),this._router$=this.injector.get(v.Router).events.subscribe(function(t){if(t instanceof v.NavigationStart){var n=e.curUrl;e.getKeepingScroll(n,e.getTruthRoute(e.snapshot))?e.positionBuffer[n]=e.ss.getScrollPosition(e.keepingScrollContainer):delete e.positionBuffer[n]}else if(t instanceof v.NavigationEnd){n=e.curUrl;var i=e.get(n);i&&i.position&&e.getKeepingScroll(n,e.getTruthRoute(e.snapshot))&&(e.isDisabledInRouter?e.ss.scrollToPosition(e.keepingScrollContainer,i.position):setTimeout(function(){return e.ss.scrollToPosition(e.keepingScrollContainer,i.position)},1))}})},e.prototype.ngOnDestroy=function(){var e=this._cachedChange,t=this._router$;this.clear(),this._cached=[],e.complete(),t&&t.unsubscribe()},e.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:s.Injector},{type:c.MenuService}]},e.ngInjectableDef=s.ɵɵdefineInjectable({factory:function(){return new e(s.ɵɵinject(s.INJECTOR),s.ɵɵinject(c.MenuService))},token:e,providedIn:"root"}),e}();var Q=function(){function e(e,t,n,i,o,r,a,l){this.srv=t,this.cdr=n,this.router=i,this.route=o,this.render=r,this.i18nSrv=a,this.doc=l,this.unsubscribe$=new C.Subject,this.list=[],this.pos=0,this.mode=G.Menu,this.debug=!1,this.allowClose=!0,this.showCurrent=!0,this.keepingScroll=!1,this.customContextMenu=[],this.change=new s.EventEmitter,this.close=new s.EventEmitter,this.el=e.nativeElement}return Object.defineProperty(e.prototype,"keepingScrollContainer",{set:function(e){this._keepingScrollContainer="string"==typeof e?this.doc.querySelector(e):e},enumerable:!0,configurable:!0}),e.prototype.genTit=function(e){return e.i18n&&this.i18nSrv?this.i18nSrv.fanyi(e.i18n):e.text},e.prototype.genList=function(e){var t=this,n=e&&"close"===e.active,i=n?this.list.findIndex(function(t){return t.url===e.url}):-1,o=this.srv.items.map(function(e,n){return{url:e.url,title:t.genTit(e.title),closable:t.allowClose&&e.closable&&t.srv.count>0,index:n,active:!1,last:!1}});if(this.showCurrent){var r=this.route.snapshot,a=this.srv.getUrl(r),l=o.findIndex(function(e){return e.url===a});if(-1!==l||n&&e.url===a)this.pos=n?l>=i?this.pos-1:this.pos:l;else{var s=this.srv.getTruthRoute(r);o.push({url:a,title:this.genTit(this.srv.getTitle(a,s)),closable:this.allowClose&&this.srv.count>0&&this.srv.getClosable(a,s),index:o.length,active:!1,last:!1}),this.pos=o.length-1}o.length<=1&&(o[0].closable=!1)}this.list=o,o.length&&n&&this.to(null,this.pos),this.refStatus(!1),this.visibility(),this.cdr.detectChanges()},e.prototype.visibility=function(){this.showCurrent||this.render.setStyle(this.el,"display",0===this.list.length?"none":"block")},Object.defineProperty(e.prototype,"acitveIndex",{get:function(){return this.list.find(function(e){return e.active}).index},enumerable:!0,configurable:!0}),e.prototype.cmChange=function(e){var t=this,n=null;switch(e.type){case"close":this._close(null,e.item.index,e.includeNonCloseable);break;case"closeRight":n=function(){t.srv.closeRight(e.item.url,e.includeNonCloseable),t.close.emit(null)};break;case"clear":case"closeOther":n=function(){t.srv.clear(e.includeNonCloseable),t.close.emit(null)}}n&&(!e.item.active&&e.item.index<=this.acitveIndex?this.to(null,e.item.index,n):n())},e.prototype.refStatus=function(e){var t=this;void 0===e&&(e=!0),this.list.length&&(this.list[this.list.length-1].last=!0,this.list.forEach(function(e,n){return e.active=t.pos===n})),e&&this.cdr.detectChanges()},e.prototype.to=function(e,t,n){var i=this;null!=e&&(e.preventDefault(),e.stopPropagation()),t=Math.max(0,Math.min(t,this.list.length-1));var o=this.list[t];this.router.navigateByUrl(o.url).then(function(e){e&&(i.pos=t,i.item=o,i.refStatus(),i.change.emit(o),n&&n())})},e.prototype._close=function(e,t,n){null!=e&&(e.preventDefault(),e.stopPropagation());var i=this.list[t];return this.srv.close(i.url,n),this.close.emit(i),this.cdr.detectChanges(),!1},e.prototype.ngOnInit=function(){var e=this;this.router.events.pipe(_.takeUntil(this.unsubscribe$),_.filter(function(e){return e instanceof v.NavigationEnd})).subscribe(function(){return e.genList()}),this.srv.change.pipe(_.takeUntil(this.unsubscribe$)).subscribe(function(t){return e.genList(t)}),this.i18nSrv.change.pipe(_.filter(function(){return e.srv.inited}),_.takeUntil(this.unsubscribe$),_.debounceTime(100)).subscribe(function(){return e.genList()}),this.genList(),this.srv.init()},e.prototype.ngOnChanges=function(e){e.max&&(this.srv.max=this.max),e.excludes&&(this.srv.excludes=this.excludes),e.mode&&(this.srv.mode=this.mode),e.keepingScroll&&(this.srv.keepingScroll=this.keepingScroll,this.srv.keepingScrollContainer=this._keepingScrollContainer),this.srv.debug=this.debug,this.cdr.detectChanges()},e.prototype.ngOnDestroy=function(){var e=this.unsubscribe$;e.next(),e.complete()},e.decorators=[{type:s.Component,args:[{selector:"reuse-tab",exportAs:"reuseTab",template:'<nz-tabset [nzSelectedIndex]="pos" [nzAnimated]="false" nzType="line"\n  [nzTabBarExtraContent]="tabBarExtraContent"\n  [nzTabBarGutter]="tabBarGutter"\n  [nzTabBarStyle]="tabBarStyle">\n  <nz-tab *ngFor="let i of list; let index = index" [nzTitle]="titleTemplate">\n    <ng-template #titleTemplate>\n      <span [reuse-tab-context-menu]="i" [customContextMenu]="customContextMenu" (click)="to($event, index)" class="reuse-tab__name">{{i.title}}</span>\n      <i *ngIf="i.closable" nz-icon nzType="close" class="reuse-tab__op" (click)="_close($event, index, false)"></i>\n    </ng-template>\n  </nz-tab>\n</nz-tabset>\n<reuse-tab-context [i18n]="i18n" (change)="cmChange($event)"></reuse-tab-context>\n',host:{"[class.reuse-tab]":"true"},providers:[K],preserveWhitespaces:!1,changeDetection:s.ChangeDetectionStrategy.OnPush,encapsulation:s.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:s.ElementRef},{type:J},{type:s.ChangeDetectorRef},{type:v.Router},{type:v.ActivatedRoute},{type:s.Renderer2},{type:void 0,decorators:[{type:s.Optional},{type:s.Inject,args:[c.PIXELMON_I18N_TOKEN]}]},{type:void 0,decorators:[{type:s.Inject,args:[p.DOCUMENT]}]}]},e.propDecorators={mode:[{type:s.Input}],i18n:[{type:s.Input}],debug:[{type:s.Input}],max:[{type:s.Input}],excludes:[{type:s.Input}],allowClose:[{type:s.Input}],showCurrent:[{type:s.Input}],keepingScroll:[{type:s.Input}],keepingScrollContainer:[{type:s.Input}],customContextMenu:[{type:s.Input}],tabBarExtraContent:[{type:s.Input}],tabBarGutter:[{type:s.Input}],tabBarStyle:[{type:s.Input}],change:[{type:s.Output}],close:[{type:s.Output}]},D([u.InputBoolean(),N("design:type",Object)],e.prototype,"debug",void 0),D([u.InputNumber(),N("design:type",Number)],e.prototype,"max",void 0),D([u.InputBoolean(),N("design:type",Object)],e.prototype,"allowClose",void 0),D([u.InputBoolean(),N("design:type",Object)],e.prototype,"showCurrent",void 0),D([u.InputBoolean(),N("design:type",Object)],e.prototype,"keepingScroll",void 0),e}();!function(){function e(e){this.srv=e}e.prototype.shouldDetach=function(e){return this.srv.shouldDetach(e)},e.prototype.store=function(e,t){this.srv.store(e,t)},e.prototype.shouldAttach=function(e){return this.srv.shouldAttach(e)},e.prototype.retrieve=function(e){return this.srv.retrieve(e)},e.prototype.shouldReuseRoute=function(e,t){return this.srv.shouldReuseRoute(e,t)}}();var ee=[Q],te=[Z,X,Y],ne=function(){function e(){}return e.decorators=[{type:s.NgModule,args:[{imports:[p.CommonModule,v.RouterModule,c.PixelmonLocaleModule,T.NzMenuModule,y.NzTabsModule,g.NzIconModule,S.OverlayModule],declarations:V(ee,te),entryComponents:[Z],exports:V(ee)}]}],e}(),ie="sidebar-nav__floating-show",oe=function(){function e(e,t,n,i,o,r,a,l){this.menuSrv=e,this.settings=t,this.router=n,this.render=i,this.cdr=o,this.ngZone=r,this.doc=a,this.win=l,this.unsubscribe$=new C.Subject,this.list=[],this.disabledAcl=!1,this.autoCloseUnderPad=!0,this.recursivePath=!0,this.openStrictly=!1,this.select=new s.EventEmitter}return Object.defineProperty(e.prototype,"collapsed",{get:function(){return this.settings.layout.collapsed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_d",{get:function(){return this.menuSrv.menus},enumerable:!0,configurable:!0}),e.prototype.floatingAreaClickHandle=function(e){e.stopPropagation();var t=e.target;if("A"!==t.nodeName)return!1;var n,i=+t.dataset.id;return this.menuSrv.visit(this._d,function(e){n||e.__id!==i||(n=e)}),this.to(n),this.hideAll(),e.preventDefault(),!1},e.prototype.clearFloatingContainer=function(){this.floatingEl&&(this.floatingEl.removeEventListener("click",this.floatingAreaClickHandle.bind(this)),this.floatingEl.hasOwnProperty("remove")?this.floatingEl.remove():this.floatingEl.parentNode&&this.floatingEl.parentNode.removeChild(this.floatingEl))},e.prototype.genFloatingContainer=function(){this.clearFloatingContainer(),this.floatingEl=this.render.createElement("div"),this.floatingEl.classList.add("sidebar-nav__floating-container"),this.floatingEl.addEventListener("click",this.floatingAreaClickHandle.bind(this),!1),this.bodyEl.appendChild(this.floatingEl)},e.prototype.genSubNode=function(e,t){var n="_sidebar-nav-"+t.__id,i=e.nextElementSibling.cloneNode(!0);return i.id=n,i.classList.add("sidebar-nav__floating"),i.addEventListener("mouseleave",function(){i.classList.remove(ie)},!1),this.floatingEl.appendChild(i),i},e.prototype.hideAll=function(){for(var e=this.floatingEl.querySelectorAll(".sidebar-nav__floating"),t=0;t<e.length;t++)e[t].classList.remove(ie)},e.prototype.calPos=function(e,t){var n=e.getBoundingClientRect(),i=Math.max(this.doc.documentElement.scrollTop,this.bodyEl.scrollTop),o=Math.max(this.doc.documentElement.clientHeight,this.bodyEl.clientHeight),r=0;o<n.top+t.clientHeight&&(r=n.top+t.clientHeight-o),t.style.top=n.top+i-r+"px",t.style.left=n.right+5+"px"},e.prototype.showSubMenu=function(e,t){var n=this;!0===this.collapsed&&this.ngZone.runOutsideAngular(function(){e.preventDefault();var i=e.target;n.genFloatingContainer();var o=n.genSubNode(i,t);n.hideAll(),o.classList.add(ie),n.calPos(i,o)})},e.prototype.to=function(e){var t=this;if(this.select.emit(e),!e.disabled)return e.externalLink?("_blank"===e.target?this.win.open(e.externalLink):this.win.location.href=e.externalLink,!1):void this.ngZone.run(function(){return t.router.navigateByUrl(e.link)})},e.prototype.toggleOpen=function(e){if(!this.openStrictly){this.menuSrv.visit(this._d,function(t){t!==e&&(t._open=!1)});for(var t=e.__parent;t;)t._open=!0,t=t.__parent}e._open=!e._open,this.cdr.markForCheck()},e.prototype._click=function(){this.isPad&&this.collapsed&&(this.openAside(!1),this.hideAll())},e.prototype._docClick=function(){this.hideAll()},e.prototype.ngOnInit=function(){var e=this,t=this,n=t.doc,i=t.router,o=t.unsubscribe$,r=t.menuSrv,a=t.cdr;this.bodyEl=n.querySelector("body"),r.openedByUrl(i.url,this.recursivePath),this.ngZone.runOutsideAngular(function(){return e.genFloatingContainer()}),r.change.pipe(_.takeUntil(o)).subscribe(function(t){r.visit(t,function(t){t._aclResult||(e.disabledAcl?t.disabled=!0:t._hidden=!0),e.openStrictly&&(t._open=null!=t.open&&t.open)}),e.list=r.menus,a.detectChanges()}),i.events.pipe(_.takeUntil(o)).subscribe(function(t){t instanceof v.NavigationEnd&&(e.menuSrv.openedByUrl(t.urlAfterRedirects,e.recursivePath),e.underPad(),e.cdr.detectChanges())}),this.underPad()},e.prototype.ngOnDestroy=function(){var e=this.unsubscribe$;e.next(),e.complete(),this.clearFloatingContainer()},Object.defineProperty(e.prototype,"isPad",{get:function(){return window.innerWidth<768},enumerable:!0,configurable:!0}),e.prototype.underPad=function(){var e=this;this.autoCloseUnderPad&&this.isPad&&!this.collapsed&&setTimeout(function(){return e.openAside(!0)})},e.prototype.openAside=function(e){this.settings.setLayout("collapsed",e)},e.decorators=[{type:s.Component,args:[{selector:"sidebar-nav",exportAs:"sidebarNav",template:'<ng-template #icon\n             let-i>\n  <ng-container *ngIf="i"\n                [ngSwitch]="i.type">\n    <i *ngSwitchCase="\'icon\'"\n       class="sidebar-nav__item-icon"\n       nz-icon\n       [nzType]="i.value"\n       [nzTheme]="i.theme"\n       [nzSpin]="i.spin"\n       [nzTwotoneColor]="i.twoToneColor"\n       [nzIconfont]="i.iconfont"></i>\n    <i *ngSwitchCase="\'iconfont\'"\n      class="sidebar-nav__item-icon"\n      nz-icon\n      [nzIconfont]="i.iconfont"></i>\n    <img *ngSwitchCase="\'img\'"\n         src="{{ i.value }}"\n         class="sidebar-nav__item-icon sidebar-nav__item-img">\n    <i *ngSwitchDefault\n       class="sidebar-nav__item-icon {{ i.value }}"></i>\n  </ng-container>\n</ng-template>\n<ul class="sidebar-nav">\n  <ng-container *ngFor="let group of list">\n    <ng-container *ngIf="group._hidden !== true">\n      <li class="sidebar-nav__item sidebar-nav__group-title"\n          *ngIf="group.group">\n        <span>{{ group.text }}</span>\n      </li>\n      <ng-container *ngFor="let child1 of group.children">\n        <li *ngIf="child1._hidden !== true"\n            class="sidebar-nav__item"\n            [class.sidebar-nav__selected]="child1._selected"\n            [class.sidebar-nav__open]="child1._open">\n          \x3c!-- link --\x3e\n          <a *ngIf="child1._type <= 2"\n             (click)="to(child1)"\n             [attr.data-id]="child1.__id"\n             class="sidebar-nav__item-link"\n             [ngClass]="{\'sidebar-nav__item-disabled\': child1.disabled}">\n            <ng-container *ngIf="!collapsed">\n              <ng-template [ngTemplateOutlet]="icon"\n                           [ngTemplateOutletContext]="{$implicit: child1.icon}"></ng-template>\n            </ng-container>\n            <nz-tooltip *ngIf="collapsed"\n                        nzPlacement="right"\n                        [nzTitle]="child1.text">\n              <span nz-tooltip>\n                <ng-template [ngTemplateOutlet]="icon"\n                             [ngTemplateOutletContext]="{$implicit: child1.icon}"></ng-template>\n              </span>\n            </nz-tooltip>\n            <span class="sidebar-nav__item-text">{{ child1.text }}</span>\n          </a>\n          \x3c!-- has children link --\x3e\n          <a *ngIf="child1._type === 3"\n             (click)="toggleOpen(child1)"\n             (mouseenter)="showSubMenu($event, child1)"\n             class="sidebar-nav__item-link">\n            <ng-template [ngTemplateOutlet]="icon"\n                         [ngTemplateOutletContext]="{$implicit: child1.icon}"></ng-template>\n            <span class="sidebar-nav__item-text">{{ child1.text }}</span>\n            <i class="sidebar-nav__sub-arrow"></i>\n          </a>\n          \x3c!-- badge --\x3e\n          <div *ngIf="child1.badge"\n               title="{{child1.badge}}"\n               class="badge badge-{{child1.badgeStatus}}"\n               [class.badge-dot]="child1.badgeDot">\n            <em>{{child1.badge}}</em>\n          </div>\n          \x3c!-- Level 2 --\x3e\n          <ul *ngIf="child1._type === 3"\n              class="sidebar-nav sidebar-nav__sub sidebar-nav__depth{{child1._depth}}">\n            <ng-container *ngFor="let child2 of child1.children">\n              <li *ngIf="child2._hidden !== true"\n                  class="sidebar-nav__item"\n                  [class.sidebar-nav__selected]="child2._selected"\n                  [class.sidebar-nav__open]="child2._open">\n                \x3c!-- link --\x3e\n                <a *ngIf="child2._type <= 2"\n                   (click)="to(child2)"\n                   [attr.data-id]="child2.__id"\n                   class="sidebar-nav__item-link"\n                   [ngClass]="{\'sidebar-nav__item-disabled\': child2.disabled}">{{\n                  child2.text }}</a>\n                \x3c!-- has children link --\x3e\n                <a *ngIf="child2._type === 3"\n                   (click)="toggleOpen(child2)"\n                   class="sidebar-nav__item-link">\n                  {{ child2.text }}\n                  <i class="sidebar-nav__sub-arrow"></i>\n                </a>\n                \x3c!-- badge --\x3e\n                <div *ngIf="child2.badge"\n                     title="{{child2.badge}}"\n                     class="badge badge-{{child2.badgeStatus}}"\n                     [class.badge-dot]="child2.badgeDot">\n                  <em>{{child2.badge}}</em>\n                </div>\n                \x3c!-- Level 3 --\x3e\n                <ul *ngIf="child2._type === 3"\n                    class="sidebar-nav sidebar-nav__sub sidebar-nav__depth{{child2._depth}}">\n                  <ng-container *ngFor="let child3 of child2.children">\n                    <li *ngIf="child3._hidden !== true"\n                        class="sidebar-nav__item"\n                        [class.sidebar-nav__selected]="child3._selected"\n                        [class.sidebar-nav__open]="child3._open">\n                      \x3c!-- link --\x3e\n                      <a *ngIf="child3._type <= 2"\n                         (click)="to(child3)"\n                         [attr.data-id]="child3.__id"\n                         class="sidebar-nav__item-link"\n                         [ngClass]="{\'sidebar-nav__item-disabled\': child3.disabled}">{{ child3.text }}</a>\n                      \x3c!-- external link --\x3e\n                      <a *ngIf="child3._type === 2"\n                         href="{{ child3.externalLink }}"\n                         target="{{ child3.target }}"\n                         data-type="external"\n                         class="sidebar-nav__item-link">{{ child3.text }}</a>\n                      \x3c!-- badge --\x3e\n                      <div *ngIf="child3.badge"\n                           title="{{child3.badge}}"\n                           class="badge badge-{{child3.badgeStatus}}"\n                           [class.badge-dot]="child3.badgeDot">\n                        <em>{{child3.badge}}</em>\n                      </div>\n                    </li>\n                  </ng-container>\n                </ul>\n              </li>\n            </ng-container>\n          </ul>\n        </li>\n      </ng-container>\n    </ng-container>\n  </ng-container>\n</ul>\n',host:{"(click)":"_click()","(document:click)":"_docClick()"},preserveWhitespaces:!1,changeDetection:s.ChangeDetectionStrategy.OnPush,encapsulation:s.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:c.MenuService},{type:c.SettingsService},{type:v.Router},{type:s.Renderer2},{type:s.ChangeDetectorRef},{type:s.NgZone},{type:void 0,decorators:[{type:s.Inject,args:[p.DOCUMENT]}]},{type:Window,decorators:[{type:s.Inject,args:[c.WINDOW]}]}]},e.propDecorators={disabledAcl:[{type:s.Input}],autoCloseUnderPad:[{type:s.Input}],recursivePath:[{type:s.Input}],openStrictly:[{type:s.Input}],select:[{type:s.Output}]},D([u.InputBoolean(),N("design:type",Object)],e.prototype,"disabledAcl",void 0),D([u.InputBoolean(),N("design:type",Object)],e.prototype,"autoCloseUnderPad",void 0),D([u.InputBoolean(),N("design:type",Object)],e.prototype,"recursivePath",void 0),D([u.InputBoolean(),N("design:type",Object)],e.prototype,"openStrictly",void 0),e}();var re=function(){function e(){}return e.decorators=[{type:s.NgModule,args:[{imports:[p.CommonModule,v.RouterModule,g.NzIconModule,O.NzToolTipModule,u.PixelmonUtilModule],declarations:[oe],exports:[oe]}]}],e}(),ae=function(){function e(){this.gutter=32,this.layout="horizontal",this.col=3,this.default=!0,this.labelWidth=null}return e.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=s.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();var le=function(){function e(e,t,n){this.ren=t,this.el=e.nativeElement,Object.assign(this,j({},new ae,n))}return e.prototype.setClass=function(){var e,t=this.el,n=this.ren,i=this.size,o=this.layout;u.updateHostClass(t,n,((e={}).sv__container=!0,e["sv__"+i]=!0,e["sv__"+o]=!0,e.clearfix=!0,e))},e.prototype.ngOnInit=function(){this.setClass()},e.prototype.ngOnChanges=function(){this.setClass()},e.decorators=[{type:s.Component,args:[{selector:"sv-container, [sv-container]",exportAs:"svContainer",template:'<div class="ant-row"\n     [ngStyle]="{\'margin-left.px\': -(gutter / 2), \'margin-right.px\': -(gutter / 2)}">\n  <sv-title *ngIf="title">\n    <ng-container *stringTemplateOutlet="title">{{title}}</ng-container>\n  </sv-title>\n  <ng-content></ng-content>\n</div>\n',preserveWhitespaces:!1,changeDetection:s.ChangeDetectionStrategy.OnPush,encapsulation:s.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:s.ElementRef},{type:s.Renderer2},{type:ae}]},e.propDecorators={title:[{type:s.Input}],size:[{type:s.Input}],gutter:[{type:s.Input}],layout:[{type:s.Input}],labelWidth:[{type:s.Input}],col:[{type:s.Input}],default:[{type:s.Input}]},D([u.InputNumber(),N("design:type",Number)],e.prototype,"gutter",void 0),D([u.InputNumber(null),N("design:type",Number)],e.prototype,"labelWidth",void 0),D([u.InputNumber(),N("design:type",Number)],e.prototype,"col",void 0),e}();var se=function(){function e(e,t,n){if(this.parent=t,this.ren=n,null==t)throw new Error("[sv-title] must include 'sv-container' component");this.el=e.nativeElement}return e.prototype.setClass=function(){var e=this.parent.gutter,t=this.el;this.ren.setStyle(t,"padding-left",e/2+"px"),this.ren.setStyle(t,"padding-right",e/2+"px")},e.prototype.ngOnInit=function(){this.setClass()},e.decorators=[{type:s.Component,args:[{selector:"sv-title, [sv-title]",exportAs:"svTitle",template:"<ng-content></ng-content>",host:{"[class.sv__title]":"true"},preserveWhitespaces:!1,changeDetection:s.ChangeDetectionStrategy.OnPush,encapsulation:s.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:s.ElementRef},{type:le,decorators:[{type:s.Host},{type:s.Optional}]},{type:s.Renderer2}]},e}();var ce=function(){function e(e,t,n,i){if(this.parent=t,this.rep=n,this.ren=i,this.clsMap=[],null==t)throw new Error("[sv] must include 'sv-container' component");this.el=e.nativeElement}return Object.defineProperty(e.prototype,"paddingValue",{get:function(){return this.parent&&this.parent.gutter/2},enumerable:!0,configurable:!0}),e.prototype.setClass=function(){var e=this,t=e.el,n=e.ren,i=e.col,o=e.clsMap,r=e.type,a=e.rep;o.forEach(function(e){return n.removeClass(t,e)}),o.length=0,o.push.apply(o,V(a.genCls(null!=i?i:this.parent.col))),o.push("sv__item"),this.parent.labelWidth&&o.push("sv__item-fixed"),r&&o.push("sv__type-"+r),o.forEach(function(e){return n.addClass(t,e)})},e.prototype.ngAfterViewInit=function(){this.setClass(),this.checkContent()},e.prototype.ngOnChanges=function(){this.setClass()},e.prototype.checkContent=function(){var e=this.conEl,t=this.default;if(null!=t?t:this.parent.default){var n=e.nativeElement,i="sv__default";n.classList.contains(i)&&n.classList.remove(i),u.isEmpty(n)&&n.classList.add(i)}},e.decorators=[{type:s.Component,args:[{selector:"sv, [sv]",exportAs:"sv",template:'<div class="sv__label"\n     [class.sv__label-empty]="!label"\n     [style.width.px]="parent.labelWidth">\n  <ng-container *stringTemplateOutlet="label">{{label}}</ng-container>\n  <span class="sv__label-optional">\n    {{ optional }}\n    <nz-tooltip *ngIf="optionalHelp" [nzTitle]="optionalHelp">\n      <i nz-tooltip nz-icon nzType="question-circle"></i>\n    </nz-tooltip>\n  </span>\n</div>\n<div class="sv__detail">\n  <span (cdkObserveContent)="checkContent()"\n        #conEl>\n    <ng-content></ng-content>\n  </span>\n  <ng-container *ngIf="!!unit">\n    <span class="sv__unit" *stringTemplateOutlet="unit">{{unit}}</span>\n  </ng-container>\n</div>\n',host:{"[style.padding-left.px]":"paddingValue","[style.padding-right.px]":"paddingValue"},preserveWhitespaces:!1,changeDetection:s.ChangeDetectionStrategy.OnPush,encapsulation:s.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:s.ElementRef},{type:le,decorators:[{type:s.Host},{type:s.Optional}]},{type:c.ResponsiveService},{type:s.Renderer2}]},e.propDecorators={conEl:[{type:s.ViewChild,args:["conEl",{static:!1}]}],optional:[{type:s.Input}],optionalHelp:[{type:s.Input}],label:[{type:s.Input}],unit:[{type:s.Input}],col:[{type:s.Input}],default:[{type:s.Input}],type:[{type:s.Input}]},D([u.InputNumber(null),N("design:type",Number)],e.prototype,"col",void 0),D([u.InputBoolean(null),N("design:type",Boolean)],e.prototype,"default",void 0),e}();var ue=[le,ce,se],pe=function(){function e(){}return e.decorators=[{type:s.NgModule,args:[{imports:[p.CommonModule,w.ObserversModule,u.PixelmonUtilModule,O.NzToolTipModule,g.NzIconModule],declarations:V(ue),exports:V(ue)}]}],e}(),de=function(){function e(){this.tabs=[],this.lexicon=[],this.tabsChange=new s.EventEmitter,this.queryChange=new s.EventEmitter,this.closeTab=new s.EventEmitter,this.filterRule=function(e){var t=e.searchValue;return(!e.hasOwnProperty("defaultValue")||t!==e.defaultValue)&&(![void 0,null,""].includes(t)&&!(Array.isArray(t)&&!t.length))}}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){e.columns&&this.updateQuery()},e.prototype.onClose=function(e){e.searchValue=e.hasOwnProperty("defaultValue")?e.defaultValue:null,this.closeTab.emit(e),this.tabs=V(this.tabs),this.tabsChange.emit(this.tabs)},e.prototype.updateQuery=function(){var e={};this.tabs.forEach(function(t){t.showFilter&&(e[t.field]=t.searchValue)}),this.queryChange.emit(e)},e.decorators=[{type:s.Component,args:[{selector:"p-queryTabs",template:'<nz-tabset nzType="card">\n  <ng-container *ngFor="let tab of tabs | filter: filterRule">\n    <nz-tab [nzTitle]="titleTemplate">\n      <ng-template #titleTemplate>\n        <div class="flex">\n          <span class="label">{{ tab.title + \'：\' }}</span>\n          <ng-container *ngIf="(tab.searchValue | translate: tab.lexicon || lexicon)?.length > 10; else textTemplate">\n            <div nz-popover nzTrigger="hover" [nzContent]="textTemplate" nzPlacement="bottom">\n              <span class="value text-ellipsis">\n                {{ tab.displayValue || tab.searchValue | translate: tab.lexicon || lexicon }}\n              </span>\n            </div>\n          </ng-container>\n\n          <ng-template #textTemplate>\n            <div>\n              <span class="value">\n                {{ tab.displayValue || tab.searchValue | translate: tab.lexicon || lexicon }}\n              </span>\n            </div>\n          </ng-template>\n\n          <div>\n            <i nz-icon nzType="close" class="ant-tabs-close-x" (click)="onClose(tab)"></i>\n          </div>\n        </div>\n      </ng-template>\n    </nz-tab>\n  </ng-container>\n</nz-tabset>\n',changeDetection:s.ChangeDetectionStrategy.OnPush,styles:[".text-ellipsis{display:inline-block;max-width:180px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;vertical-align:top}.flex{display:flex;align-items:center;justify-content:center}.label{color:#515151}.value{color:#1890ff}:host ::ng-deep .ant-tabs.ant-tabs-card .ant-tabs-bar{margin:0 0 2px;border:none}:host ::ng-deep .ant-tabs.ant-tabs-card .ant-tabs-bar .ant-tabs-tab{height:30px;margin:0 2px 0 0;padding:0 16px;line-height:28px;background:#fafafa;border:1px solid #e8e8e8!important;border-radius:4px;transition:.3s cubic-bezier(.645,.045,.355,1)}:host ::ng-deep .ant-tabs.ant-tabs-card .ant-tabs-bar .ant-tabs-nav-container{height:31px}:host ::ng-deep .ant-tabs.ant-tabs-card .ant-tabs-bar .ant-tabs-tab-active{font-weight:400}"]}]}],e.ctorParameters=function(){return[]},e.propDecorators={tabs:[{type:s.Input}],lexicon:[{type:s.Input}],tabsChange:[{type:s.Output}],queryChange:[{type:s.Output}],closeTab:[{type:s.Output}],filterRule:[{type:s.Input}]},e}();var he=function(){function e(){}return e.decorators=[{type:s.NgModule,args:[{declarations:[de],imports:[p.CommonModule,c.TranslatePipeModule,c.FilterPipeModule,P.NgZorroAntdModule],exports:[p.CommonModule,c.TranslatePipeModule,c.FilterPipeModule,P.NgZorroAntdModule,de]}]}],e}();var ge=function(){function e(){this.field=""}return e.prototype.ngOnInit=function(){},e.decorators=[{type:s.Component,args:[{selector:"p-advancedCell",template:"<ng-content> </ng-content>"}]}],e.ctorParameters=function(){return[]},e.propDecorators={field:[{type:s.Input}],templateRef:[{type:s.ContentChild,args:[s.TemplateRef,{static:!1}]}]},e}();var fe=function(){function e(){this.field=""}return e.prototype.ngOnInit=function(){},e.decorators=[{type:s.Component,args:[{selector:"p-advancedFilter",template:"<ng-content> </ng-content>"}]}],e.ctorParameters=function(){return[]},e.propDecorators={field:[{type:s.Input}],templateRef:[{type:s.ContentChild,args:[s.TemplateRef,{static:!1}]}]},e}();var me=function(){function e(e,t){this._elementRef=e,this._renderer2=t,this.columns=[],this.data={data:[],totalSize:0},this.selections=[],this.loading=!1,this.pageSize=10,this.frontPagination=!1,this.showPagination=!0,this.fixedPagination=!1,this.showSizeChanger=!0,this.size="middle",this.pageSizeOptions=[10,30,50,100],this.showCheckbox=!1,this.columnsChange=new s.EventEmitter,this.selectionsChange=new s.EventEmitter,this.load=new s.EventEmitter,this.sort=new s.EventEmitter,this.linkClick=new s.EventEmitter,this.load$=new C.Subject,this.displayData=[],this.pageIndex=1}return e.prototype.ngOnChanges=function(e){e.data&&this.sortParams&&this.sortParams.key&&this.sortParams.value&&this.onSort(this.sortParams),e.columns&&e.columns.currentValue.forEach(function(e){e.showFilter&&"select"===e.filterType&&Array.isArray(e.filterOptions)&&(e.lexicon=e.lexicon?V(e.lexicon,e.filterOptions):e.filterOptions)}),e.selections&&this.updateCheckedBySelections()},e.prototype.ngOnInit=function(){var e=this;this.load$.pipe(_.debounceTime(20)).subscribe(function(){e.selections=[],e.selectionsChange.emit(e.selections),e.load.emit({page:e.pageIndex,size:e.pageSize})})},e.prototype.ngAfterViewInit=function(){this.load$.next(),this.fixedPagination&&this.toFixedPagination()},e.prototype.ngAfterContentInit=function(){var e=this;this.customCells.forEach(function(t){var n=e.columns.find(function(e){return e.field===t.field});n&&(n.customCell=t.templateRef)}),this.customFilters.forEach(function(t){var n=e.columns.find(function(e){return e.field===t.field});n&&(n.showFilter=!0,n.customFilter=t.templateRef)})},e.prototype.ngOnDestroy=function(){this.load$.unsubscribe()},e.prototype.currentPageDataChange=function(e){this.displayData=e},e.prototype.singleCheckChange=function(){this.updateSelectionsByChecked()},e.prototype.allCheckChange=function(e){this.displayData.forEach(function(t){return t.isChecked=e}),this.updateSelectionsByChecked()},e.prototype.updateSelectionsByChecked=function(){this.selections=this.displayData.filter(function(e){return e.isChecked}),this.selectionsChange.emit(this.selections)},e.prototype.updateCheckedBySelections=function(){var e=this;this.displayData.forEach(function(t){return t.isChecked=e.selections.includes(t)})},e.prototype.pageIndexChange=function(){this.load$.next()},e.prototype.pageSizeChange=function(){this.pageIndex=1,this.load$.next()},e.prototype.onSort=function(e){this.sortParams=e;var t=this.columns.find(function(t){return t.field===e.key});t&&!t.customSort&&(this.data.data.sort(function(t,n){return"descend"===e.value?n[e.key]>t[e.key]?1:-1:t[e.key]>n[e.key]?1:-1}),this.data.data=V(this.data.data)),this.sort.emit(e)},e.prototype.onRangePickerOpenChange=function(e,t){if(!1===e){var n=t.searchValue;n&&Array.isArray(n)&&2===n.length&&(t.searchValue=[p.formatDate(n[0],"yyyy-MM-dd 00:00:00","zh_CN"),p.formatDate(n[1],"yyyy-MM-dd 23:59:59","zh_CN")],t.displayValue=[p.formatDate(n[0],"yyyy-MM-dd","zh_CN"),p.formatDate(n[1],"yyyy-MM-dd","zh_CN")])}},e.prototype.onFilterConfim=function(e){e.setVisibleStateWhen(!1),this.columns=V(this.columns),this.columnsChange.emit(this.columns)},e.prototype.toFixedPagination=function(){var e=this;this.scroll={y:"0px"},setTimeout(function(){var t=document.documentElement.clientHeight,n=e._elementRef.nativeElement.querySelector(".ant-table-body"),i=e._elementRef.nativeElement.querySelector("nz-pagination"),o=t-n.getBoundingClientRect().top-i.clientHeight-8+"px";e.scroll=j({},e.scroll,{y:o}),e._renderer2.setStyle(n,"height",o)})},e.prototype.onlinkClick=function(e,t){this.linkClick.emit({field:e,rowData:t})},e.decorators=[{type:s.Component,args:[{selector:"p-advancedTable",template:'<nz-table\n  class="advanced-table"\n  [nzData]="data?.data || []"\n  [nzLoading]="loading"\n  [nzTitle]="titleTemplate || null"\n  [nzScroll]="scroll"\n  [nzFrontPagination]="frontPagination"\n  [nzSize]="size"\n  [nzShowPagination]="showPagination"\n  [(nzPageIndex)]="pageIndex"\n  [(nzPageSize)]="pageSize"\n  [nzShowSizeChanger]="showSizeChanger"\n  [nzPageSizeOptions]="pageSizeOptions"\n  [nzTotal]="data?.totalSize || 0"\n  [nzShowTotal]="totalTemplate"\n  (nzPageIndexChange)="pageIndexChange()"\n  (nzPageSizeChange)="pageSizeChange()"\n  (nzCurrentPageDataChange)="currentPageDataChange($event)"\n  [class.fixed-pagination]="fixedPagination"\n>\n  <thead (nzSortChange)="onSort($event)" nzSingleSort>\n    <tr>\n      <th\n        *ngIf="showCheckbox"\n        nzLeft="0px"\n        nzWidth="40px"\n        nzShowCheckbox\n        [nzChecked]="selections.length > 0 && displayData.length === selections.length"\n        [nzIndeterminate]="selections.length > 0 && displayData.length !== selections.length"\n        (nzCheckedChange)="allCheckChange($event)"\n      ></th>\n      <th\n        *ngFor="let column of columns"\n        [nzLeft]="column.left"\n        [nzRight]="column.right"\n        [nzWidth]="column.width || \'120px\'"\n        [nzShowSort]="column.showSort"\n        [nzSortKey]="column.field"\n        [nzCustomFilter]="column.showFilter"\n      >\n        {{ column.title }}\n        <nz-dropdown *ngIf="column.showFilter" nzTrigger="click" nzPlacement="bottomRight" [nzClickHide]="false" nzTableFilter #dropdown>\n          <i nz-icon nzType="search" class="ant-table-filter-icon" [class.ant-table-filter-open]="dropdown.nzVisible" nz-dropdown></i>\n          <div class="advanced-table-filter-panel">\n            \x3c!-- 自定义搜索组件 --\x3e\n            <ng-template [ngIf]="column.customFilter" [ngIfElse]="defaultFilterTemplate">\n              <ng-container [ngTemplateOutlet]="column.customFilter" [ngTemplateOutletContext]="{ $implicit: column }"></ng-container>\n            </ng-template>\n            \x3c!-- 默认搜索组件 --\x3e\n            <ng-template #defaultFilterTemplate>\n              <ng-container [ngSwitch]="column.filterType">\n                \x3c!-- select --\x3e\n                <ng-template ngSwitchCase="select">\n                  <nz-select\n                    nzAllowClear\n                    nzPlaceHolder="请选择"\n                    [(ngModel)]="column.searchValue"\n                    [nzMode]="column.filterMultiple ? \'multiple\' : \'default\'"\n                    [style.width]="column.filterWidth || \'180px\'"\n                  >\n                    <nz-option\n                      *ngFor="let option of column.filterOptions || []"\n                      [nzValue]="option.value"\n                      [nzLabel]="option.label"\n                    ></nz-option>\n                  </nz-select>\n                </ng-template>\n                \x3c!-- range-picker --\x3e\n                <ng-template ngSwitchCase="rangePicker">\n                  <nz-range-picker\n                    nzAllowClear\n                    [(ngModel)]="column.searchValue"\n                    [nzStyle]="{ width: column.filterWidth || \'240px\' }"\n                    (nzOnOpenChange)="onRangePickerOpenChange($event, column)"\n                  ></nz-range-picker>\n                </ng-template>\n                \x3c!-- input --\x3e\n                <ng-template ngSwitchDefault>\n                  <nz-input-group [nzSuffix]="suffixTemplate">\n                    <input\n                      #input\n                      nz-input\n                      placeholder="请输入"\n                      [(ngModel)]="column.searchValue"\n                      [style.width]="column.filterWidth || \'180px\'"\n                      (keydown.enter)="onFilterConfim(dropdown)"\n                    />\n                  </nz-input-group>\n                  <ng-template #suffixTemplate>\n                    <i\n                      nz-icon\n                      nz-tooltip\n                      class="clear-icon"\n                      nzTheme="fill"\n                      nzType="close-circle"\n                      *ngIf="column.searchValue"\n                      (click)="column.searchValue = null; input.focus()"\n                    ></i>\n                  </ng-template>\n                </ng-template>\n              </ng-container>\n            </ng-template>\n            \x3c!-- 按钮 --\x3e\n            <div nz-row nzType="flex" nzJustify="end" nzAlign="middle" class="advanced-table-filter-button">\n              <button nz-button nzSize="small" nzType="primary" (click)="onFilterConfim(dropdown)">\n                确认\n              </button>\n            </div>\n          </div>\n        </nz-dropdown>\n      </th>\n    </tr>\n  </thead>\n  <tbody>\n    <ng-container *ngFor="let row of displayData">\n      <tr>\n        <td *ngIf="showCheckbox" nzLeft="0px" nzShowCheckbox [(nzChecked)]="row.isChecked" (nzCheckedChange)="singleCheckChange()"></td>\n        <td [nzLeft]="column.left" [nzRight]="column.right" *ngFor="let column of columns">\n          \x3c!-- 自定义单元格 --\x3e\n          <ng-template [ngIf]="column.customCell" [ngIfElse]="defaultCellTemplate">\n            <ng-container [ngTemplateOutlet]="column.customCell" [ngTemplateOutletContext]="{ $implicit: row }"></ng-container>\n          </ng-template>\n          \x3c!-- 默认单元格 --\x3e\n          <ng-template #defaultCellTemplate>\n            <ng-container [ngSwitch]="column.type">\n              \x3c!-- link --\x3e\n              <ng-template ngSwitchCase="link">\n                <a (click)="onlinkClick(column[\'field\'], row)">\n                  <smart-text [text]="row[column[\'field\']]"></smart-text>\n                </a>\n              </ng-template>\n              \x3c!-- thumbnail --\x3e\n              <ng-template ngSwitchCase="thumbnail">\n                \x3c!-- 无图片不初始化viewer --\x3e\n                <div viewer [isLazyLoad]="true" [maxShowNum]="1" *ngIf="row[column[\'field\']]?.length">\n                  \x3c!-- 超过一张图片显示badge --\x3e\n                  <ng-template [ngIf]="row[column[\'field\']]?.length > 1" [ngIfElse]="noBadgeTemplate">\n                    <nz-badge [nzCount]="row[column[\'field\']]?.length">\n                      <ng-container [ngTemplateOutlet]="noBadgeTemplate"></ng-container>\n                    </nz-badge>\n                  </ng-template>\n                  \x3c!-- 只有一张图片不显示badge --\x3e\n                  <ng-template #noBadgeTemplate>\n                    <img\n                      viewerImg\n                      height="24px"\n                      width="24px"\n                      *ngFor="let url of row[column[\'field\']] || []"\n                      [lazyLoadSrc]="url"\n                      style="cursor: zoom-in"\n                    />\n                  </ng-template>\n                </div>\n              </ng-template>\n              \x3c!-- default --\x3e\n              <ng-template ngSwitchDefault>\n                <smart-text [text]="row[column[\'field\']]"></smart-text>\n              </ng-template>\n            </ng-container>\n          </ng-template>\n        </td>\n      </tr>\n    </ng-container>\n  </tbody>\n\n  \x3c!-- total模板 --\x3e\n  <ng-template #totalTemplate let-total> 总 {{ total }} 条数据 </ng-template>\n</nz-table>\n',changeDetection:s.ChangeDetectionStrategy.OnPush,styles:[":host ::ng-deep .ant-table-scroll{position:relative}:host ::ng-deep .fixed-pagination .ant-table-placeholder{position:absolute;bottom:0;width:100%}td{word-break:break-all}.clear-icon{color:rgba(0,0,0,.25);font-size:12px;vertical-align:top;cursor:pointer;transition:color .3s}.clear-icon:hover{color:rgba(0,0,0,.45)}"]}]}],e.ctorParameters=function(){return[{type:s.ElementRef},{type:s.Renderer2}]},e.propDecorators={columns:[{type:s.Input}],data:[{type:s.Input}],selections:[{type:s.Input}],scroll:[{type:s.Input}],loading:[{type:s.Input}],pageSize:[{type:s.Input}],frontPagination:[{type:s.Input}],showPagination:[{type:s.Input}],fixedPagination:[{type:s.Input}],showSizeChanger:[{type:s.Input}],size:[{type:s.Input}],pageSizeOptions:[{type:s.Input}],showCheckbox:[{type:s.Input}],titleTemplate:[{type:s.Input}],columnsChange:[{type:s.Output}],selectionsChange:[{type:s.Output}],load:[{type:s.Output}],sort:[{type:s.Output}],linkClick:[{type:s.Output}],customCells:[{type:s.ContentChildren,args:[ge]}],customFilters:[{type:s.ContentChildren,args:[fe]}]},e}();var ye=[me,ge,fe],be=[p.CommonModule,M.FormsModule,P.NgZorroAntdModule,E.SmartTextModule,R.ViewerDirectiveModule],ve=function(){function e(){}return e.decorators=[{type:s.NgModule,args:[{declarations:V(ye),imports:V(be),exports:V(be,ye)}]}],e}();var xe=function(){function e(){this._text="",this.maxLength=20,this.tail="..."}return Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(e){this._text=null==e?"":String(e)},enumerable:!0,configurable:!0}),e.decorators=[{type:s.Component,args:[{selector:"smart-text",template:'\x3c!-- 直接显示 --\x3e\n<ng-container *ngIf="text.length <= maxLength; else tooltipBlock">\n  <span>{{ text }}</span>\n</ng-container>\n\n\x3c!-- 提示框显示 --\x3e\n<ng-template #tooltipBlock>\n  <span nz-tooltip [nzTitle]="text">{{ text | shortcut: maxLength:tail }}</span>\n</ng-template>\n\n<ng-content></ng-content>\n'}]}],e.propDecorators={maxLength:[{type:s.Input}],tail:[{type:s.Input}],text:[{type:s.Input}]},e}();var Ce=function(){function e(){}return e.decorators=[{type:s.NgModule,args:[{imports:[p.CommonModule,c.ShortcutPipeModule,O.NzToolTipModule],declarations:[xe],exports:[p.CommonModule,xe]}]}],e}(),_e=[ve,he,Ce,t.LodopModule,ne,$,re,pe,W],ze=function(){function e(){}return e.decorators=[{type:s.NgModule,args:[{exports:_e}]}],e}();Object.defineProperty(e,"LodopConfig",{enumerable:!0,get:function(){return t.LodopConfig}}),Object.defineProperty(e,"LodopModule",{enumerable:!0,get:function(){return t.LodopModule}}),Object.defineProperty(e,"LodopService",{enumerable:!0,get:function(){return t.LodopService}}),Object.defineProperty(e,"ReuseTabComponent",{enumerable:!0,get:function(){return n.ReuseTabComponent}}),Object.defineProperty(e,"ReuseTabContextComponent",{enumerable:!0,get:function(){return n.ReuseTabContextComponent}}),Object.defineProperty(e,"ReuseTabContextDirective",{enumerable:!0,get:function(){return n.ReuseTabContextDirective}}),Object.defineProperty(e,"ReuseTabContextMenuComponent",{enumerable:!0,get:function(){return n.ReuseTabContextMenuComponent}}),Object.defineProperty(e,"ReuseTabContextService",{enumerable:!0,get:function(){return n.ReuseTabContextService}}),Object.defineProperty(e,"ReuseTabMatchMode",{enumerable:!0,get:function(){return n.ReuseTabMatchMode}}),Object.defineProperty(e,"ReuseTabModule",{enumerable:!0,get:function(){return n.ReuseTabModule}}),Object.defineProperty(e,"ReuseTabService",{enumerable:!0,get:function(){return n.ReuseTabService}}),Object.defineProperty(e,"ReuseTabStrategy",{enumerable:!0,get:function(){return n.ReuseTabStrategy}}),Object.defineProperty(e,"NoticeIconComponent",{enumerable:!0,get:function(){return i.NoticeIconComponent}}),Object.defineProperty(e,"NoticeIconModule",{enumerable:!0,get:function(){return i.NoticeIconModule}}),Object.defineProperty(e,"NoticeIconTabComponent",{enumerable:!0,get:function(){return i.NoticeIconTabComponent}}),Object.defineProperty(e,"SidebarNavComponent",{enumerable:!0,get:function(){return o.SidebarNavComponent}}),Object.defineProperty(e,"SidebarNavModule",{enumerable:!0,get:function(){return o.SidebarNavModule}}),Object.defineProperty(e,"SVComponent",{enumerable:!0,get:function(){return r.SVComponent}}),Object.defineProperty(e,"SVConfig",{enumerable:!0,get:function(){return r.SVConfig}}),Object.defineProperty(e,"SVContainerComponent",{enumerable:!0,get:function(){return r.SVContainerComponent}}),Object.defineProperty(e,"SVModule",{enumerable:!0,get:function(){return r.SVModule}}),Object.defineProperty(e,"SVTitleComponent",{enumerable:!0,get:function(){return r.SVTitleComponent}}),Object.defineProperty(e,"PageHeaderComponent",{enumerable:!0,get:function(){return a.PageHeaderComponent}}),Object.defineProperty(e,"PageHeaderConfig",{enumerable:!0,get:function(){return a.PageHeaderConfig}}),Object.defineProperty(e,"PageHeaderModule",{enumerable:!0,get:function(){return a.PageHeaderModule}}),Object.defineProperty(e,"AdvancedTableModule",{enumerable:!0,get:function(){return l.AdvancedTableModule}}),e.PikachuModule=ze,e.ɵa=ve,e.ɵb=he,e.ɵc=Ce,e.ɵd=ne,e.ɵe=$,e.ɵf=re,e.ɵg=pe,e.ɵh=W,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=pikachu.umd.min.js.map