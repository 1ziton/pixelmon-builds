/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @Description: 基于viewer封装
 * @Author: zomixi
 * @Date: 2019-07-09 16:56:59
 */
import { NgModule, Directive, ContentChildren, QueryList, ElementRef, Input } from '@angular/core';
export class ViewerImgDirective {
    // HTMLImageElement实例
    /**
     * @param {?} _elementRef
     */
    constructor(_elementRef) {
        this._elementRef = _elementRef;
        this.lazyLoadSrc = ''; // 懒加载图片url
        // 懒加载图片url
        this.thumbnailSrc = `data:img/jpg;base64,
  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`; // 懒加载缩略图url
        this.nativeElement = this._elementRef.nativeElement;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        // 懒加载时赋值url
        if (this.lazyLoadSrc) {
            this.nativeElement.src = this.thumbnailSrc;
            this.nativeElement.dataset.lazyLoadSrc = this.lazyLoadSrc;
        }
    }
}
ViewerImgDirective.decorators = [
    { type: Directive, args: [{
                selector: '[viewerImg]',
            },] }
];
/** @nocollapse */
ViewerImgDirective.ctorParameters = () => [
    { type: ElementRef }
];
ViewerImgDirective.propDecorators = {
    lazyLoadSrc: [{ type: Input }],
    thumbnailSrc: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    ViewerImgDirective.prototype.lazyLoadSrc;
    /** @type {?} */
    ViewerImgDirective.prototype.thumbnailSrc;
    /** @type {?} */
    ViewerImgDirective.prototype.nativeElement;
    /**
     * @type {?}
     * @private
     */
    ViewerImgDirective.prototype._elementRef;
}
export class ViewerDirective {
    // 当viewerImgs改变时自动更新viewer
    /**
     * @param {?} _elementRef
     */
    constructor(_elementRef) {
        this._elementRef = _elementRef;
        this.viewer = null; // viewer实例
        // 用于unsubscribe
        this.isLazyLoad = false; // 是否懒加载图片
        // 是否懒加载图片
        this.maxShowNum = Infinity; // 最大显示数量
    }
    /**
     * @return {?}
     */
    ngAfterContentInit() {
        this.initViewer();
        this._subscription = this.viewerImgs.changes.subscribe((/**
         * @return {?}
         */
        () => {
            // 等待DOM更新
            setTimeout((/**
             * @return {?}
             */
            () => {
                this.initViewer();
            }));
        }));
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
    }
    /**
     * @return {?}
     */
    initViewer() {
        /** @type {?} */
        let imgElements;
        // 因为ready事件只会执行一遍，故采用destroy再new的方法，update方法不适用
        if (this.viewer) {
            this.viewer.destroy();
        }
        this.viewer = new Viewer(this._elementRef.nativeElement, {
            ready: (/**
             * @return {?}
             */
            () => {
                imgElements = this.viewer.images || [];
                // 给src赋值懒加载url
                if (this.isLazyLoad) {
                    // tslint:disable-next-line: prefer-for-of
                    for (let index = 0; index < imgElements.length; index++) {
                        /** @type {?} */
                        const element = (/** @type {?} */ (imgElements[index]));
                        element.src = (/** @type {?} */ (element.dataset.lazyLoadSrc));
                    }
                }
            }),
        });
        // viewer初始化后才有viewer.images
        imgElements = this.viewer.images || [];
        // 超过最大数量的不显示
        for (let index = this.maxShowNum; index < imgElements.length; index++) {
            /** @type {?} */
            const element = (/** @type {?} */ (imgElements[index]));
            element.hidden = true;
        }
    }
}
ViewerDirective.decorators = [
    { type: Directive, args: [{
                selector: '[viewer]',
            },] }
];
/** @nocollapse */
ViewerDirective.ctorParameters = () => [
    { type: ElementRef }
];
ViewerDirective.propDecorators = {
    isLazyLoad: [{ type: Input }],
    maxShowNum: [{ type: Input }],
    viewerImgs: [{ type: ContentChildren, args: [ViewerImgDirective, { descendants: true },] }]
};
if (false) {
    /** @type {?} */
    ViewerDirective.prototype.viewer;
    /**
     * @type {?}
     * @private
     */
    ViewerDirective.prototype._subscription;
    /** @type {?} */
    ViewerDirective.prototype.isLazyLoad;
    /** @type {?} */
    ViewerDirective.prototype.maxShowNum;
    /** @type {?} */
    ViewerDirective.prototype.viewerImgs;
    /**
     * @type {?}
     * @private
     */
    ViewerDirective.prototype._elementRef;
}
export class ViewerDirectiveModule {
}
ViewerDirectiveModule.decorators = [
    { type: NgModule, args: [{
                declarations: [ViewerDirective, ViewerImgDirective],
                exports: [ViewerDirective, ViewerImgDirective],
            },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlld2VyLmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BwaXhlbG1vbi9waWthY2h1L3ZpZXdlci8iLCJzb3VyY2VzIjpbInZpZXdlci5kaXJlY3RpdmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBTUEsT0FBTyxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQStCLGVBQWUsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBVSxNQUFNLGVBQWUsQ0FBQztBQVF4SSxNQUFNLE9BQU8sa0JBQWtCOzs7OztJQStEN0IsWUFBb0IsV0FBeUM7UUFBekMsZ0JBQVcsR0FBWCxXQUFXLENBQThCO1FBOURwRCxnQkFBVyxHQUFHLEVBQUUsQ0FBQyxDQUFDLFdBQVc7O1FBQzdCLGlCQUFZLEdBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7K0NBMERxQixDQUFDLENBQUMsWUFBWTtRQUl6RCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDO0lBQ3RELENBQUM7Ozs7SUFFRCxRQUFRO1FBQ04sWUFBWTtRQUNaLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNwQixJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1lBQzNDLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO1NBQzNEO0lBQ0gsQ0FBQzs7O1lBNUVGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsYUFBYTthQUN4Qjs7OztZQVBzRixVQUFVOzs7MEJBUzlGLEtBQUs7MkJBQ0wsS0FBSzs7OztJQUROLHlDQUEwQjs7SUFDMUIsMENBMEQ4Qzs7SUFDOUMsMkNBQWdDOzs7OztJQUVwQix5Q0FBaUQ7O0FBZ0IvRCxNQUFNLE9BQU8sZUFBZTs7Ozs7SUFRMUIsWUFBb0IsV0FBdUI7UUFBdkIsZ0JBQVcsR0FBWCxXQUFXLENBQVk7UUFQM0MsV0FBTSxHQUFRLElBQUksQ0FBQyxDQUFDLFdBQVc7O1FBR3RCLGVBQVUsR0FBRyxLQUFLLENBQUMsQ0FBQyxVQUFVOztRQUM5QixlQUFVLEdBQUcsUUFBUSxDQUFDLENBQUMsU0FBUztJQUdLLENBQUM7Ozs7SUFFL0Msa0JBQWtCO1FBQ2hCLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUVsQixJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLFNBQVM7OztRQUFDLEdBQUcsRUFBRTtZQUMxRCxVQUFVO1lBQ1YsVUFBVTs7O1lBQUMsR0FBRyxFQUFFO2dCQUNkLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUNwQixDQUFDLEVBQUMsQ0FBQztRQUNMLENBQUMsRUFBQyxDQUFDO0lBQ0wsQ0FBQzs7OztJQUVELFdBQVc7UUFDVCxJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUU7WUFDdEIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztTQUNsQztJQUNILENBQUM7Ozs7SUFFRCxVQUFVOztZQUNKLFdBQTJCO1FBQy9CLGdEQUFnRDtRQUNoRCxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDO1NBQ3ZCO1FBQ0QsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLGFBQWEsRUFBRTtZQUN2RCxLQUFLOzs7WUFBRSxHQUFHLEVBQUU7Z0JBQ1YsV0FBVyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FBQztnQkFFdkMsZUFBZTtnQkFDZixJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7b0JBQ25CLDBDQUEwQztvQkFDMUMsS0FBSyxJQUFJLEtBQUssR0FBRyxDQUFDLEVBQUUsS0FBSyxHQUFHLFdBQVcsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLEVBQUU7OzhCQUNqRCxPQUFPLEdBQUcsbUJBQUEsV0FBVyxDQUFDLEtBQUssQ0FBQyxFQUFvQjt3QkFDdEQsT0FBTyxDQUFDLEdBQUcsR0FBRyxtQkFBQSxPQUFPLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBVSxDQUFDO3FCQUNyRDtpQkFDRjtZQUNILENBQUMsQ0FBQTtTQUNGLENBQUMsQ0FBQztRQUVILDRCQUE0QjtRQUM1QixXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLElBQUksRUFBRSxDQUFDO1FBRXZDLGFBQWE7UUFDYixLQUFLLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsS0FBSyxHQUFHLFdBQVcsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLEVBQUU7O2tCQUMvRCxPQUFPLEdBQUcsbUJBQUEsV0FBVyxDQUFDLEtBQUssQ0FBQyxFQUFvQjtZQUN0RCxPQUFPLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztTQUN2QjtJQUNILENBQUM7OztZQTNERixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLFVBQVU7YUFDckI7Ozs7WUF0RnNGLFVBQVU7Ozt5QkEyRjlGLEtBQUs7eUJBQ0wsS0FBSzt5QkFDTCxlQUFlLFNBQUMsa0JBQWtCLEVBQUUsRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFOzs7O0lBTDFELGlDQUFtQjs7Ozs7SUFDbkIsd0NBQW9DOztJQUVwQyxxQ0FBNEI7O0lBQzVCLHFDQUErQjs7SUFDL0IscUNBQXNHOzs7OztJQUUxRixzQ0FBK0I7O0FBdUQ3QyxNQUFNLE9BQU8scUJBQXFCOzs7WUFKakMsUUFBUSxTQUFDO2dCQUNSLFlBQVksRUFBRSxDQUFDLGVBQWUsRUFBRSxrQkFBa0IsQ0FBQztnQkFDbkQsT0FBTyxFQUFFLENBQUMsZUFBZSxFQUFFLGtCQUFrQixDQUFDO2FBQy9DIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBARGVzY3JpcHRpb246IOWfuuS6jnZpZXdlcuWwgeijhVxuICogQEF1dGhvcjogem9taXhpXG4gKiBARGF0ZTogMjAxOS0wNy0wOSAxNjo1Njo1OVxuICovXG5cbmltcG9ydCB7IE5nTW9kdWxlLCBEaXJlY3RpdmUsIEFmdGVyQ29udGVudEluaXQsIE9uRGVzdHJveSwgQ29udGVudENoaWxkcmVuLCBRdWVyeUxpc3QsIEVsZW1lbnRSZWYsIElucHV0LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuXG5kZWNsYXJlIHZhciBWaWV3ZXI7XG5cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ1t2aWV3ZXJJbWddJyxcbn0pXG5leHBvcnQgY2xhc3MgVmlld2VySW1nRGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgbGF6eUxvYWRTcmMgPSAnJzsgLy8g5oeS5Yqg6L295Zu+54mHdXJsXG4gIEBJbnB1dCgpIHRodW1ibmFpbFNyYyA9IGBkYXRhOmltZy9qcGc7YmFzZTY0LFxuICBpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBTWdBQUFESUNBWUFBQUN0V0s2ZUFBQU1sMGxFUVZSNFh1MmRnYkh1TmhHRjlTb0lWQUJVXG4gIDhFZ0ZJUldFVkJDb0lLRUNvSUlrRlVBcUNGU1FwSUlIRlVBNklCWEFITWFHeStQZC8rcXNyZFhLL2pSekovTXk2MS9TV1gxZXlaWlhcbiAgcnhvRkJWRGdXUVZlb1EwS29NRHpDZ0FJb3dNRkhpZ0FJQXdQRkFBUXhnQUt4QlFnZ3NSMDQ2cWJLQUFnTjNFMDNZd3BBQ0F4M2JqcVxuICBKZ29BeUUwY1RUZGpDZ0JJVERldXVva0NBSElUUjlQTm1BSUFFdE9OcTI2aUFJRGN4TkYwTTZZQWdNUjA0NnFiS0FBZ04zRTAzWXdwXG4gIEFDQXgzYmpxSmdvQXlFMGNUVGRqQ2dCSVREZXV1b2tDQUhJVFI5UE5tQUlBRXRPTnEyNmlBSURjeE5GME02WUFnTVIwNDZxYktBQWdcbiAgTjNFMDNZd3BBQ0F4M2JqcUpnb0F5RTBjVFRkakNnQklURGV1dW9rQ0FISVRSOVBObUFJQUV0T05xMjZpQUlEY3hORjBNNllBZ01SMFxuICA0NnFiS0FBZ04zRTAzWXdwQUNBeDNianFKZ29BeUUwY1RUZGpDZ0JJVERldXVva0NBSElUUjlQTm1BSUFFdE9OcTI2aUFJRGN4TkYwXG4gIE02YkFDb0I4c0hYdHA2MDEvVkhXVitEdnJUWDlxWHhYdVRzVkFmbFJhKzJqMXRvdldtdS9iSzNwMzVUckt2Q1AxdHFmV212ZnR0YitcbiAgM0ZyVHY4dVVTb0FJaEU5YmE1OEJSWm54a2QwUXdmRkZhKzNMS3FCVUFlU1RUUmlpUmZhUXJGbWZRTkdOOHF2Wnpac05pSUQ0dkxYMlxuICBxOWxDVUg5SkJmN1lXdnZOekdneUV4REI4VTFyN2VjbFhVT2pxaWp3bDliYWg3TWdtUVVJY0ZRWmZtdTBZeG9rc3dCUjVOQlRLZ29LXG4gIDlDcWdwMXlLSktsbEJpQjZTcUduVlJRVWNCWFEweTB0M3ROS05pQmFiN3hKNngwVlhWR0I5MXRybW5LbGxHeEFtRnFsdVBYU2xhUk9cbiAgdFRJQjBacERnRkJRNEtnQ1dvc0lsT0VsRXhCdEo5QVdFZ29LSEZWQVcxSzBEV2w0eVFUa244SGVmTCs5WlJkZyt3YTM0RTl4V1JFRlxuICB0T2xVQTF3TDdwOEUyNVF5ZGxNcTJjVDRPaUNFN2hSNnkxNXFBMXVnSDF6eWJnWDBQa3h2eXlNemk0KzNUWTVEdGMwQ1JDSm92NVZUXG4gIC9zcGJka2V1cFczMVZPcTEyUVB0MHhxK1JTa0xFQzJvOXU4NmVuWDRHVk9xWHFtV3Q0czgvdGQzSk1OZk5sY0ZoT2l4L0ppM08rQkdcbiAga1VzQjRpN1FmOTlhKzUwdE1SZXNySUQ4L1Z1ekE4TnY4TU1yMkRvTUlLYm5iMmdPSUliVGlTQ0dXQmN4QlJERGtRQmlpSFVSVXdBeFxuICBIQWtnaGxnWE1RVVF3NUVBWW9oMUVWTUFNUndKSUlaWUZ6RUZFTU9SMllDOEt6bmR2bHRVZThIWUEyWTRMMmdLSUlad293RnhrOVBwXG4gIEpaWTJTMnB2V05ySE9vWmVWekFGRU1PTG93QTVJem1kSW92YWwvSTlncUhaNnFZQVluaHdCQ0JuSjZkVFJGSE9KcVpmaG1NZm1BS0lcbiAgb2VPWmdJeE1UcWR0K05wMlRUUXhuUHVNS1lBWUdwNEZTRmIrclY5djN6VVlYY1QwTFFVQXhCZ1Nad0NTQmNmZUxTQXhIUHdPVXdBeFxuICA5RHNEa0JrWlZOS1NDUmhhcm1JS0lJYW5qZ0l5S3ptZDFpVEsyOFRDM1hEMlpnb2dobVpIQUlsOG5XWTA3VVZUUGQzU3dwM2lLUUFnXG4gIGhsNUhBSmt4dFhxN2EweTFER2NUUVZyTCttQ3FTbks2MU94Ly9sZ3NlUVVSeEhCTE5JSlVTazZYbWtQVzBMYXFLWUFZbm9rQzRrYXFcbiAgdlVudlNrNm54R2I2YzlNVjdiOFo3WU1oMDZWTUFjUndaMlJ3YVRDUFNFNm4zMVZlci9lTTlzdFVteG9WUlNoOUNnQkluMDcvdG9vQVxuICBNakk1WFJRK2NudjFPeDFBK3JVS0FUSTZPVjFrZmNQVHJINm5BMGkvVmltQXVNbnBJbEVFUVBxZERpRDlXb1VBY1Jmb2tXbGNSaDJHXG4gIFRKY3lCUkREblZVSEw0QVlUalJOQWNRUUxBS0k5ajg1WjAyNDJjRjFwc1hmakQ3SWxCMisvWUlCU0w5V29TbVd1MGpYeHNJZkcyM1NcbiAgWVMrZkcvWXlaUTNTTHhpQTlHdVZBb2lhbzA5bXRmUDNwYUp2U3hROTlGK25BRWkvV2dEU3IxVUlrTWdkWGszcTJSS2lGNUR1bVhnL1xuICBCSUF5SkxxY0tZQVlMbzJzUVNKcmhMMUpjbzdxZkx0bzYvd2ZnaWRkdVdzY1E1NUxtZ0tJNGRZSUlQcDVkNkgrdEVsYWt6dzlLRlFSXG4gIFE0QkV5NG9MOUQyQjN2Q1RtOTRocXVwMDZ4MStmTWZ3Q2pZaHNoNlBSdTVDVVFBZVhhZnBsU0phOWNOSGRRUFFaa3dOekNNM2d4RWFcbiAgOXZ6bThQRTd2SUprUUxTSVZoUnhOeGIyT01PeGlVWkFwNDRqdG9KQ054TkJ2SElaUG42SFY1QU1pS3FiSFVVcVI0K3JnTEZEUFh6OFxuICBEcTlnQWlCSDF5Skg3NmdWMXg2S3JIclk0RDZKTzZyRjZPdUhqOS9oRlV3Q1JQTnB2VGpNbm1wVmZISWxMZlNkdnZzT1ovVGdQdVAzXG4gIGg0L2Y0UlZNQWtUVjZwQjUzVFd6aW5ZSGE3RmJhV0V1RGZUMi80cHd5Sy9EeCsvd0NpWUNrZ2xKVlRneWJ4QlpONktuOVF3ZnY4TXJcbiAgbUF6SURvbTJrNHlhYnVsQWU4M3RLMFdPSzArckFDVDR5ZTJqTzVnR2pGNENPcnQ5ZSs2SVg3Yld0TVdsVXRGMDZzMEZIdUgyYURyOFxuICBCais4Z2dJUjVLblFlZ1NzQVgwMG1paHE2SGNxbmpZVjJUZldNeGdyMmd3ZnY4TXJLQWFJbXFNN3JBYTNGckJ1Uk5FUmJKcXVWVDBQXG4gIHBFcml2Q3lZaG8vZjRSVVVCT1NwOC9RbWVjOS9wZit2ZisvUUtFcW82TTI4cG1mNnExNDB0VnB4eTBoVTErSGpkM2dGeFFHSk9xYmlcbiAgZFdjODF0WjdIS1ZQVXNtT2twRWRFTVBINy9BS0FDU05KWDNRRmQxYkpUQTBRR2NlMndBZ3hsQ3B2dG5QNkVxSzZaSG8wZnRWNWVpT1xuICBBSWloTUlBWVltMmZBMGVpUnhVNDFGc0FNWHdPSVAxaVJhT0hIa0s0SHlqMXQ4cTNCQkJETXdEcEZ5dTY5cWlXTnhoQStuMGVTdHBnXG4gIC9QeGxUS1BSbytLdVl3QXhoaVVScEUrc3EwUVAxaUI5L3Y2UEZZQzhMTmlWb2dlQXZPenYvN0VBa01lQ0hkbVFXRzN0c2ZlVUtaWUJcbiAgQ1lBOEZrdmZlU2lDdUtYaTJnTkFXdDRwdCs2QVdjMytTQ0k3OWJWcTlHQ0taWTdFRlNPSXBqMnZ0MzVxSUovNW1hdCs2Mmp1cXNyUlxuICBBMEF1Q29qZVhuKzBUWGVxNzZLdEhEMEE1R0tBQ0F3bFExZ2xqVTcxNkFFZ0Z3RkVVeDJCRVZrZ214S2NabDQ1a2QzVFR2SVV5M0I1XG4gIHhUWEkwUVd5MGYxVFRTdHRTSHpVTVFBeDNGNE5FRTJsOUdqMXpJVzNJVWZZdE5xR1JBQjVSb0dzN083aGtmVGd3dWdiNnhGdGNYN3pcbiAgKyszejIwcnBpQURrWW9Dc0NvY1MyU25xemZ4QzBJR1pSYnFwVm9VcDFzcHdWRXVCMnVOKzFpQTlLbTAyc3dGWkZRNGxzdE5BVzJWYVxuICB4Vk9zVFlHVjFpQXJ3cUhGdU1ESXprUmkzUE5lTkNXQ3ZDalJmdzFtUlpEVjRGQWlPK1hyMmxQMUdCS1hNd1VRd3lVekFLa09oNTVLXG4gIGFkR3RkS2Y2RXhnclRxV2VHd1lBVWhpUXMrRFFWRWQzODZzTlhzTjFZVk1BTWFUTGpDQm53YkhLRzJ2RERhbW1BR0xJblFYSVdYQlVcbiAgUEpmUWtMdUVLWUFZYnNnQUJEZ01oeVNZQW9naDhtaEFnTU53UnBJcGdCaENqd1FFT0F4SEpKb0NpQ0gyS0VDQXczQkNzaW1BR0lLUFxuICBBQVE0REFkTU1BVVFRL1N6QVFFT1EveEpwZ0JpQ0g4bUlNQmhDRC9SRkVBTThjOENCRGdNMFNlYkFvamhnRE1BQVE1RDhBS21BR0k0XG4gIDRTZ2d3R0dJWGNRVVFBeEhIQUVFT0F5aEM1a0NpT0dNS0NEQVlZaGN6QlJBRElkRUFBRU9RK0NDcGdCaU9NVUZCRGdNY1l1YUFvamhcbiAgR0FjUTREQ0VMV3dLSUlaemVnRUJEa1BVNHFZQVlqaW9KeHM1Y0JpQ0xtQjZhMENVanVZRHcwbEtTdkQrQTN2Z01NUmN4UFRObGlxMVxuICB0N2twZVlkZjliYm1vSjBMaUtyNzhKazhUOEJ4MEJrRkwxZm1mQUhpbEVzQm9rd2Zuemk5MzFMYkNKS25xVzJBd3hSeEVYTTNlcWhiXG4gIFBkUHd3OTNQaWlCS3BQeDFvTFdLUEI5dmtBQkhRTURpbCtnNENSMHJFVG1wUytOQzZaV0dsaXhBMUFrMy9lamVjVVVRQ1hIR3FVNWtcbiAgSHhrNm5McC9mRC9iVVF2ejZKa3JLV00zcFpKTk5nMXlIWGhKUVlHakNpamxhaVRxMlBWbUFxS1UvTi9ZTGVRQ0ZQaC9CWjU3Z0hPNlxuICBWcG1BcVBHUnAxbW5kNW9mWEZxQmxLZFh1MExaZ0VRZTV5M3RUUnAvdWdKNlA2YjNaQ2tsR3hCMTZvdlcycWNwdmFPU3F5bWdBNEkrXG4gIHkrelVERUNZYW1WNitEcDFwVTZ0WmsyeDlucjFhRS9ya2RmWDhSODlHYWlBRGlXZGN1N2lyQWdpTFlGazRJaTYwRTlQZzBNYXpnUmtcbiAgaDBSckVuY2J5b1g4VDFjZUtLRHRKRnB6VER0SmF6WWd1elo2U3k1UTNtTzRvRUJyN1ljTmpPbG5MMVlCWkk4bXVsdm9EMUR1eVluQVxuICAwSTFTZjlPaXhsUHBLd0h5ZEFHdmJRUmFsT20vd0hKdFdBU0Z0aUhwb1UyNXN4MHJBdkwyY0JBb0t0cmdwai9LK2dyb3RGNzlxWlErXG4gIDIzMEZRTllmRHZSZ1dRVUFaRm5YMGZBTUJRQWtRMlhxV0ZZQkFGbldkVFE4UXdFQXlWQ1pPcFpWQUVDV2RSME56MUFBUURKVXBvNWxcbiAgRlFDUVpWMUh3ek1VQUpBTWxhbGpXUVVBWkZuWDBmQU1CUUFrUTJYcVdGWUJBRm5XZFRROFF3RUF5VkNaT3BaVkFFQ1dkUjBOejFBQVxuICBRREpVcG81bEZRQ1FaVjFId3pNVUFKQU1sYWxqV1FVQVpGblgwZkFNQlFBa1EyWHFXRllCQUZuV2RUUThRd0VBeVZDWk9wWlZBRUNXXG4gIGRSME56MUFBUURKVXBvNWxGUUNRWlYxSHd6TVVBSkFNbGFsaldRVUFaRm5YMGZBTUJRQWtRMlhxV0ZZQkFGbldkVFE4UXdFQXlWQ1pcbiAgT3BaVkFFQ1dkUjBOejFBQVFESlVwbzVsRlFDUVpWMUh3ek1VQUpBTWxhbGpXUVVBWkZuWDBmQU1CUUFrUTJYcVdGWUJBRm5XZFRROFxuICBRd0VBeVZDWk9wWlY0RitjZjI3blJKVlVWQUFBQUFCSlJVNUVya0pnZ2c9PWA7IC8vIOaHkuWKoOi9vee8qeeVpeWbvnVybFxuICBuYXRpdmVFbGVtZW50OiBIVE1MSW1hZ2VFbGVtZW50OyAvLyBIVE1MSW1hZ2VFbGVtZW505a6e5L6LXG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfZWxlbWVudFJlZjogRWxlbWVudFJlZjxIVE1MSW1hZ2VFbGVtZW50Pikge1xuICAgIHRoaXMubmF0aXZlRWxlbWVudCA9IHRoaXMuX2VsZW1lbnRSZWYubmF0aXZlRWxlbWVudDtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIC8vIOaHkuWKoOi9veaXtui1i+WAvHVybFxuICAgIGlmICh0aGlzLmxhenlMb2FkU3JjKSB7XG4gICAgICB0aGlzLm5hdGl2ZUVsZW1lbnQuc3JjID0gdGhpcy50aHVtYm5haWxTcmM7XG4gICAgICB0aGlzLm5hdGl2ZUVsZW1lbnQuZGF0YXNldC5sYXp5TG9hZFNyYyA9IHRoaXMubGF6eUxvYWRTcmM7XG4gICAgfVxuICB9XG59XG5cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ1t2aWV3ZXJdJyxcbn0pXG5leHBvcnQgY2xhc3MgVmlld2VyRGlyZWN0aXZlIGltcGxlbWVudHMgQWZ0ZXJDb250ZW50SW5pdCwgT25EZXN0cm95IHtcbiAgdmlld2VyOiBhbnkgPSBudWxsOyAvLyB2aWV3ZXLlrp7kvotcbiAgcHJpdmF0ZSBfc3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247IC8vIOeUqOS6jnVuc3Vic2NyaWJlXG5cbiAgQElucHV0KCkgaXNMYXp5TG9hZCA9IGZhbHNlOyAvLyDmmK/lkKbmh5LliqDovb3lm77niYdcbiAgQElucHV0KCkgbWF4U2hvd051bSA9IEluZmluaXR5OyAvLyDmnIDlpKfmmL7npLrmlbDph49cbiAgQENvbnRlbnRDaGlsZHJlbihWaWV3ZXJJbWdEaXJlY3RpdmUsIHsgZGVzY2VuZGFudHM6IHRydWUgfSkgdmlld2VySW1nczogUXVlcnlMaXN0PFZpZXdlckltZ0RpcmVjdGl2ZT47IC8vIOW9k3ZpZXdlckltZ3PmlLnlj5jml7boh6rliqjmm7TmlrB2aWV3ZXJcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9lbGVtZW50UmVmOiBFbGVtZW50UmVmKSB7fVxuXG4gIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICB0aGlzLmluaXRWaWV3ZXIoKTtcblxuICAgIHRoaXMuX3N1YnNjcmlwdGlvbiA9IHRoaXMudmlld2VySW1ncy5jaGFuZ2VzLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAvLyDnrYnlvoVET03mm7TmlrBcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmluaXRWaWV3ZXIoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMuX3N1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy5fc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICB9XG5cbiAgaW5pdFZpZXdlcigpIHtcbiAgICBsZXQgaW1nRWxlbWVudHM6IEhUTUxDb2xsZWN0aW9uO1xuICAgIC8vIOWboOS4unJlYWR55LqL5Lu25Y+q5Lya5omn6KGM5LiA6YGN77yM5pWF6YeH55SoZGVzdHJveeWGjW5ld+eahOaWueazle+8jHVwZGF0ZeaWueazleS4jemAgueUqFxuICAgIGlmICh0aGlzLnZpZXdlcikge1xuICAgICAgdGhpcy52aWV3ZXIuZGVzdHJveSgpO1xuICAgIH1cbiAgICB0aGlzLnZpZXdlciA9IG5ldyBWaWV3ZXIodGhpcy5fZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCB7XG4gICAgICByZWFkeTogKCkgPT4ge1xuICAgICAgICBpbWdFbGVtZW50cyA9IHRoaXMudmlld2VyLmltYWdlcyB8fCBbXTtcblxuICAgICAgICAvLyDnu5lzcmPotYvlgLzmh5LliqDovb11cmxcbiAgICAgICAgaWYgKHRoaXMuaXNMYXp5TG9hZCkge1xuICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogcHJlZmVyLWZvci1vZlxuICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBpbWdFbGVtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBpbWdFbGVtZW50c1tpbmRleF0gYXMgSFRNTEltYWdlRWxlbWVudDtcbiAgICAgICAgICAgIGVsZW1lbnQuc3JjID0gZWxlbWVudC5kYXRhc2V0LmxhenlMb2FkU3JjIGFzIHN0cmluZztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyB2aWV3ZXLliJ3lp4vljJblkI7miY3mnIl2aWV3ZXIuaW1hZ2VzXG4gICAgaW1nRWxlbWVudHMgPSB0aGlzLnZpZXdlci5pbWFnZXMgfHwgW107XG5cbiAgICAvLyDotoXov4fmnIDlpKfmlbDph4/nmoTkuI3mmL7npLpcbiAgICBmb3IgKGxldCBpbmRleCA9IHRoaXMubWF4U2hvd051bTsgaW5kZXggPCBpbWdFbGVtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBpbWdFbGVtZW50c1tpbmRleF0gYXMgSFRNTEltYWdlRWxlbWVudDtcbiAgICAgIGVsZW1lbnQuaGlkZGVuID0gdHJ1ZTtcbiAgICB9XG4gIH1cbn1cblxuQE5nTW9kdWxlKHtcbiAgZGVjbGFyYXRpb25zOiBbVmlld2VyRGlyZWN0aXZlLCBWaWV3ZXJJbWdEaXJlY3RpdmVdLFxuICBleHBvcnRzOiBbVmlld2VyRGlyZWN0aXZlLCBWaWV3ZXJJbWdEaXJlY3RpdmVdLFxufSlcbmV4cG9ydCBjbGFzcyBWaWV3ZXJEaXJlY3RpdmVNb2R1bGUge31cbiJdfQ==