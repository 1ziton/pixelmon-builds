/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @Description: 基于viewer封装
 * @Author: zomixi
 * @Date: 2019-07-09 16:56:59
 */
import { NgModule, Directive, ContentChildren, QueryList, ElementRef, Input } from '@angular/core';
var ViewerImgDirective = /** @class */ (function () {
    function ViewerImgDirective(_elementRef) {
        this._elementRef = _elementRef;
        this.lazyLoadSrc = ''; // 懒加载图片url
        // 懒加载图片url
        this.thumbnailSrc = "data:img/jpg;base64,\n  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"; // 懒加载缩略图url
        this.nativeElement = this._elementRef.nativeElement;
    }
    /**
     * @return {?}
     */
    ViewerImgDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        // 懒加载时赋值url
        if (this.lazyLoadSrc) {
            this.nativeElement.src = this.thumbnailSrc;
            this.nativeElement.dataset.lazyLoadSrc = this.lazyLoadSrc;
        }
    };
    ViewerImgDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[viewerImg]',
                },] }
    ];
    /** @nocollapse */
    ViewerImgDirective.ctorParameters = function () { return [
        { type: ElementRef }
    ]; };
    ViewerImgDirective.propDecorators = {
        lazyLoadSrc: [{ type: Input }],
        thumbnailSrc: [{ type: Input }]
    };
    return ViewerImgDirective;
}());
export { ViewerImgDirective };
if (false) {
    /** @type {?} */
    ViewerImgDirective.prototype.lazyLoadSrc;
    /** @type {?} */
    ViewerImgDirective.prototype.thumbnailSrc;
    /** @type {?} */
    ViewerImgDirective.prototype.nativeElement;
    /**
     * @type {?}
     * @private
     */
    ViewerImgDirective.prototype._elementRef;
}
var ViewerDirective = /** @class */ (function () {
    function ViewerDirective(_elementRef) {
        this._elementRef = _elementRef;
        this.viewer = null; // viewer实例
        // 用于unsubscribe
        this.isLazyLoad = false; // 是否懒加载图片
        // 是否懒加载图片
        this.maxShowNum = Infinity; // 最大显示数量
    }
    /**
     * @return {?}
     */
    ViewerDirective.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.initViewer();
        this._subscription = this.viewerImgs.changes.subscribe((/**
         * @return {?}
         */
        function () {
            // 等待DOM更新
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.initViewer();
            }));
        }));
    };
    /**
     * @return {?}
     */
    ViewerDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this._subscription) {
            this._subscription.unsubscribe();
        }
    };
    /**
     * @return {?}
     */
    ViewerDirective.prototype.initViewer = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var imgElements;
        // 因为ready事件只会执行一遍，故采用destroy再new的方法，update方法不适用
        if (this.viewer) {
            this.viewer.destroy();
        }
        this.viewer = new Viewer(this._elementRef.nativeElement, {
            ready: (/**
             * @return {?}
             */
            function () {
                imgElements = _this.viewer.images || [];
                // 给src赋值懒加载url
                if (_this.isLazyLoad) {
                    // tslint:disable-next-line: prefer-for-of
                    for (var index = 0; index < imgElements.length; index++) {
                        /** @type {?} */
                        var element = (/** @type {?} */ (imgElements[index]));
                        element.src = (/** @type {?} */ (element.dataset.lazyLoadSrc));
                    }
                }
            }),
        });
        // viewer初始化后才有viewer.images
        imgElements = this.viewer.images || [];
        // 超过最大数量的不显示
        for (var index = this.maxShowNum; index < imgElements.length; index++) {
            /** @type {?} */
            var element = (/** @type {?} */ (imgElements[index]));
            element.hidden = true;
        }
    };
    ViewerDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[viewer]',
                },] }
    ];
    /** @nocollapse */
    ViewerDirective.ctorParameters = function () { return [
        { type: ElementRef }
    ]; };
    ViewerDirective.propDecorators = {
        isLazyLoad: [{ type: Input }],
        maxShowNum: [{ type: Input }],
        viewerImgs: [{ type: ContentChildren, args: [ViewerImgDirective, { descendants: true },] }]
    };
    return ViewerDirective;
}());
export { ViewerDirective };
if (false) {
    /** @type {?} */
    ViewerDirective.prototype.viewer;
    /**
     * @type {?}
     * @private
     */
    ViewerDirective.prototype._subscription;
    /** @type {?} */
    ViewerDirective.prototype.isLazyLoad;
    /** @type {?} */
    ViewerDirective.prototype.maxShowNum;
    /** @type {?} */
    ViewerDirective.prototype.viewerImgs;
    /**
     * @type {?}
     * @private
     */
    ViewerDirective.prototype._elementRef;
}
var ViewerDirectiveModule = /** @class */ (function () {
    function ViewerDirectiveModule() {
    }
    ViewerDirectiveModule.decorators = [
        { type: NgModule, args: [{
                    declarations: [ViewerDirective, ViewerImgDirective],
                    exports: [ViewerDirective, ViewerImgDirective],
                },] }
    ];
    return ViewerDirectiveModule;
}());
export { ViewerDirectiveModule };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlld2VyLmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BwaXhlbG1vbi9waWthY2h1L3ZpZXdlci8iLCJzb3VyY2VzIjpbInZpZXdlci5kaXJlY3RpdmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBTUEsT0FBTyxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQStCLGVBQWUsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUt4STtJQWtFRSw0QkFBb0IsV0FBeUM7UUFBekMsZ0JBQVcsR0FBWCxXQUFXLENBQThCO1FBOURwRCxnQkFBVyxHQUFHLEVBQUUsQ0FBQyxDQUFDLFdBQVc7O1FBQzdCLGlCQUFZLEdBQUcsc2hKQTBEcUIsQ0FBQyxDQUFDLFlBQVk7UUFJekQsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQztJQUN0RCxDQUFDOzs7O0lBRUQscUNBQVE7OztJQUFSO1FBQ0UsWUFBWTtRQUNaLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNwQixJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1lBQzNDLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO1NBQzNEO0lBQ0gsQ0FBQzs7Z0JBNUVGLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsYUFBYTtpQkFDeEI7Ozs7Z0JBUHNGLFVBQVU7Ozs4QkFTOUYsS0FBSzsrQkFDTCxLQUFLOztJQXdFUix5QkFBQztDQUFBLEFBN0VELElBNkVDO1NBMUVZLGtCQUFrQjs7O0lBQzdCLHlDQUEwQjs7SUFDMUIsMENBMEQ4Qzs7SUFDOUMsMkNBQWdDOzs7OztJQUVwQix5Q0FBaUQ7O0FBYS9EO0lBV0UseUJBQW9CLFdBQXVCO1FBQXZCLGdCQUFXLEdBQVgsV0FBVyxDQUFZO1FBUDNDLFdBQU0sR0FB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bjog5Z+65LqOdmlld2Vy5bCB6KOFXG4gKiBAQXV0aG9yOiB6b21peGlcbiAqIEBEYXRlOiAyMDE5LTA3LTA5IDE2OjU2OjU5XG4gKi9cblxuaW1wb3J0IHsgTmdNb2R1bGUsIERpcmVjdGl2ZSwgQWZ0ZXJDb250ZW50SW5pdCwgT25EZXN0cm95LCBDb250ZW50Q2hpbGRyZW4sIFF1ZXJ5TGlzdCwgRWxlbWVudFJlZiwgSW5wdXQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5cbmRlY2xhcmUgdmFyIFZpZXdlcjtcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW3ZpZXdlckltZ10nLFxufSlcbmV4cG9ydCBjbGFzcyBWaWV3ZXJJbWdEaXJlY3RpdmUgaW1wbGVtZW50cyBPbkluaXQge1xuICBASW5wdXQoKSBsYXp5TG9hZFNyYyA9ICcnOyAvLyDmh5LliqDovb3lm77niYd1cmxcbiAgQElucHV0KCkgdGh1bWJuYWlsU3JjID0gYGRhdGE6aW1nL2pwZztiYXNlNjQsXG4gIGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFNZ0FBQURJQ0FZQUFBQ3RXSzZlQUFBTWwwbEVRVlI0WHUyZGdiSHVOaEdGOVNvSVZBQlVcbiAgOEVnRklSV0VWQkNvSUtFQ29JSWtGVUFxQ0ZTUXBJSUhGVUE2SUJYQUhNYUd5K1BkLytxc3JkWEsvalJ6Si9NeTYxL1NXWDFleVpaWFxuICByeG9GQlZEZ1dRVmVvUTBLb01EekNnQUlvd01GSGlnQUlBd1BGQUFReGdBS3hCUWdnc1IwNDZxYktBQWdOM0UwM1l3cEFDQXgzYmpxXG4gIEpnb0F5RTBjVFRkakNnQklURGV1dW9rQ0FISVRSOVBObUFJQUV0T05xMjZpQUlEY3hORjBNNllBZ01SMDQ2cWJLQUFnTjNFMDNZd3BcbiAgQUNBeDNianFKZ29BeUUwY1RUZGpDZ0JJVERldXVva0NBSElUUjlQTm1BSUFFdE9OcTI2aUFJRGN4TkYwTTZZQWdNUjA0NnFiS0FBZ1xuICBOM0UwM1l3cEFDQXgzYmpxSmdvQXlFMGNUVGRqQ2dCSVREZXV1b2tDQUhJVFI5UE5tQUlBRXRPTnEyNmlBSURjeE5GME02WUFnTVIwXG4gIDQ2cWJLQUFnTjNFMDNZd3BBQ0F4M2JqcUpnb0F5RTBjVFRkakNnQklURGV1dW9rQ0FISVRSOVBObUFJQUV0T05xMjZpQUlEY3hORjBcbiAgTTZiQUNvQjhzSFh0cDYwMS9WSFdWK0R2clRYOXFYeFh1VHNWQWZsUmErMmoxdG92V211L2JLM3AzNVRyS3ZDUDF0cWZXbXZmdHRiK1xuICAzRnJUdjh1VVNvQUloRTliYTU4QlJabnhrZDBRd2ZGRmErM0xLcUJVQWVTVFRSaWlSZmFRckZtZlFOR044cXZaelpzTmlJRDR2TFgyXG4gIHE5bENVSDlKQmY3WVd2dk56R2d5RXhEQjhVMXI3ZWNsWFVPanFpandsOWJhaDdNZ21RVUljRlFaZm11MFl4b2tzd0JSNU5CVEtnb0tcbiAgOUNxZ3AxeUtKS2xsQmlCNlNxR25WUlFVY0JYUTB5MHQzdE5LTmlCYWI3eEo2eDBWWFZHQjkxdHJtbktsbEd4QW1GcWx1UFhTbGFST1xuICB0VElCMFpwRGdGQlE0S2dDV29zSWxPRWxFeEJ0SjlBV0Vnb0tIRlZBVzFLMERXbDR5UVRrbjhIZWZMKzlaUmRnK3dhMzRFOXhXUkVGXG4gIHRPbFVBMXdMN3A4RTI1UXlkbE1xMmNUNE9pQ0U3aFI2eTE1cUExdWdIMXp5YmdYMFBreHZ5eU16aTQrM1RZNUR0YzBDUkNKb3Y1VlRcbiAgL3NwYmRrZXVwVzMxVk9xMTJRUHQweHErUlNrTEVDMm85dTg2ZW5YNEdWT3FYcW1XdDRzOC90ZDNKTU5mTmxjRmhPaXgvSmkzTytCR1xuICBrVXNCNGk3UWY5OWErNTB0TVJlc3JJRDgvVnV6QThOdjhNTXIyRG9NSUtibmIyZ09JSWJUaVNDR1dCY3hCUkREa1FCaWlIVVJVd0F4XG4gIEhBa2dobGdYTVFVUXc1RUFZb2gxRVZNQU1Sd0pJSVpZRnpFRkVNT1IyWUM4S3puZHZsdFVlOEhZQTJZNEwyZ0tJSVp3b3dGeGs5UHBcbiAgSlpZMlMycHZXTnJIT29aZVZ6QUZFTU9Mb3dBNUl6bWRJb3ZhbC9JOWdxSFo2cVlBWW5od0JDQm5KNmRUUkZIT0pxWmZobU1mbUFLSVxuICBvZU9aZ0l4TVRxZHQrTnAyVFRReG5QdU1LWUFZR3A0RlNGYityVjl2M3pVWVhjVDBMUVVBeEJnU1p3Q1NCY2ZlTFNBeEhQd09Vd0F4XG4gIDlEc0RrQmtaVk5LU0NSaGFybUlLSUlhbmpnSXlLem1kMWlUSzI4VEMzWEQyWmdvZ2htWkhBSWw4bldZMDdVVlRQZDNTd3AzaUtRQWdcbiAgaGw1SEFKa3h0WHE3YTB5MURHY1RRVnJMK21DcVNuSzYxT3gvL2xnc2VRVVJ4SEJMTklKVVNrNlhta1BXMExhcUtZQVlub2tDNGthcVxuICB2VW52U2s2bnhHYjZjOU1WN2I4WjdZTWgwNlZNQWNSd1oyUndhVENQU0U2bjMxVmVyL2VNOXN0VW14b1ZSU2g5Q2dCSW4wNy90b29BXG4gIE1qSTVYUlErY252MU94MUErclVLQVRJNk9WMWtmY1BUckg2bkEwaS9WaW1BdU1ucElsRUVRUHFkRGlEOVdvVUFjUmZva1dsY1JoMkdcbiAgVEpjeUJSRERuVlVITDRBWVRqUk5BY1FRTEFLSTlqODVaMDI0MmNGMXBzWGZqRDdJbEIyKy9ZSUJTTDlXb1NtV3Uwalh4c0lmRzIzU1xuICBZUytmRy9ZeVpRM1NMeGlBOUd1VkFvaWFvMDltdGZQM3BhSnZTeFE5OUYrbkFFaS9XZ0RTcjFVSWtNZ2RYazNxMlJLaUY1RHVtWGcvXG4gIEJJQXlKTHFjS1lBWUxvMnNRU0pyaEwxSmNvN3FmTHRvNi93ZmdpZGR1V3NjUTU1TG1nS0k0ZFlJSVBwNWQ2SCt0RWxha3p3OUtGUVJcbiAgUTRCRXk0b0w5RDJCM3ZDVG05NGhxdXAwNngxK2ZNZndDalloc2g2UFJ1NUNVUUFlWGFmcGxTSmE5Y05IZFFQUVprd056Q00zZ3hFYVxuICA5dnptOFBFN3ZJSmtRTFNJVmhSeE54YjJPTU94aVVaQXA0NGp0b0pDTnhOQnZISVpQbjZIVjVBTWlLcWJIVVVxUjQrcmdMRkRQWHo4XG4gIERxOWdBaUJIMXlKSDc2Z1YxeDZLckhyWTRENkpPNnJGNk91SGo5L2hGVXdDUlBOcHZUak1ubXBWZkhJbExmU2R2dnNPWi9UZ1B1UDNcbiAgaDQvZjRSVk1Ba1RWNnBCNTNUV3ppbllIYTdGYmFXRXVEZlQyLzRwd3lLL0R4Ky93Q2lZQ2tnbEpWVGd5YnhCWk42S245UXdmdjhNclxuICBtQXpJRG9tMms0eWFidWxBZTgzdEswV09LMCtyQUNUNHllMmpPNWdHakY0Q09ydDllKzZJWDdiV3RNV2xVdEYwNnMwRkh1SDJhRHI4XG4gIEJqKzhnZ0lSNUtuUWVnU3NBWDAwbWlocTZIY3FuallWMlRmV014Z3IyZ3dmdjhNcktBYUltcU03ckFhM0ZyQnVSTkVSYkpxdVZUMFBcbiAgcEVyaXZDeVloby9mNFJVVUJPU3A4L1FtZWM5L3BmK3ZmKy9RS0VxbzZNMjhwbWY2cTE0MHRWcHh5MGhVMStIamQzZ0Z4UUdKT3FiaVxuICBkV2M4MXRaN0hLVlBVc21Pa3BFZEVNUEg3L0FLQUNTTkpYM1FGZDFiSlRBMFFHY2Uyd0FneGxDcHZ0blA2RXFLNlpIbzBmdFY1ZWlPXG4gIEFJaWhNSUFZWW0yZkEwZWlSeFU0MUZzQU1Yd09JUDFpUmFPSEhrSzRIeWoxdDhxM0JCQkRNd0RwRnl1NjlxaVdOeGhBK24wZVN0cGdcbiAgL1B4bFRLUFJvK0t1WXdBeGhpVVJwRStzcTBRUDFpQjkvdjZQRllDOExOaVZvZ2VBdk96di83RUFrTWVDSGRtUVdHM3RzZmVVS1pZQlxuICBDWUE4Rmt2ZmVTaUN1S1hpMmdOQVd0NHB0KzZBV2MzK1NDSTc5YlZxOUdDS1pZN0VGU09JcGoydnQzNXFJSi81bWF0KzYyanVxc3JSXG4gIEEwQXVDb2plWG4rMFRYZXE3Nkt0SEQwQTVHS0FDQXdsUTFnbGpVNzE2QUVnRndGRVV4MkJFVmtnbXhLY1psNDVrZDNUVHZJVXkzQjVcbiAgeFRYSTBRV3kwZjFUVFN0dFNIelVNUUF4M0Y0TkVFMmw5R2oxeklXM0lVZll0TnFHUkFCNVJvR3M3Tzdoa2ZUZ3d1Z2I2eEZ0Y1g3elxuICArKzN6MjBycGlBRGtZb0NzQ29jUzJTbnF6ZnhDMElHWlJicXBWb1VwMXNwd1ZFdUIydU4rMWlBOUttMDJzd0ZaRlE0bHN0TkFXMlZhXG4gIHhWT3NUWUdWMWlBcndxSEZ1TURJemtSaTNQTmVOQ1dDdkNqUmZ3MW1SWkRWNEZBaU8rWHIybFAxR0JLWE13VVF3eVV6QUtrT2g1NUtcbiAgYWRHdGRLZjZFeGdyVHFXZUd3WUFVaGlRcytEUVZFZDM4NnNOWHNOMVlWTUFNYVRMakNCbndiSEtHMnZERGFtbUFHTEluUVhJV1hCVVxuICBQSmZRa0x1RUtZQVlic2dBQkRnTWh5U1lBb2doOG1oQWdNTndScElwZ0JoQ2p3UUVPQXhISkpvQ2lDSDJLRUNBdzNCQ3NpbUFHSUtQXG4gIEFBUTREQWRNTUFVUVEvU3pBUUVPUS94SnBnQmlDSDhtSU1CaENEL1JGRUFNOGM4Q0JEZ00wU2ViQW9qaGdETUFBUTVEOEFLbUFHSTRcbiAgNFNnZ3dHR0lYY1FVUUF4SEhBRUVPQXloQzVrQ2lPR01LQ0RBWVloY3pCUkFESWRFQUFFT1ErQ0NwZ0JpT01VRkJEZ01jWXVhQW9qaFxuICBHQWNRNERDRUxXd0tJSVp6ZWdFQkRrUFU0cVlBWWppb0p4czVjQmlDTG1CNmEwQ1VqdVlEdzBsS1N2RCtBM3ZnTU1SY3hQVE5saXExXG4gIHQ3a3BlWWRmOWJibW9KMExpS3I3OEprOFQ4QngwQmtGTDFmbWZBSGlsRXNCb2t3Zm56aTkzMUxiQ0pLbnFXMkF3eFJ4RVhNM2VxaGJcbiAgUGRQd3c5M1BpaUJLcFB4MW9MV0tQQjl2a0FCSFFNRGlsK2c0Q1IwckVUbXBTK05DNlpXR2xpeEExQWszL2VqZWNVVVFDWEhHcVU1a1xuICBIeGs2bkxwL2ZEL2JVUXZ6NkprcktXTTNwWkpOTmcxeUhYaEpRWUdqQ2lqbGFpVHEyUFZtQXFLVS9OL1lMZVFDRlBoL0JaNTdnSE82XG4gIFZwbUFxUEdScDFtbmQ1b2ZYRnFCbEtkWHUwTFpnRVFlNXkzdFRScC91Z0o2UDZiM1pDa2xHeEIxNm92VzJxY3B2YU9TcXltZ0E0SStcbiAgeSt6VURFQ1lhbVY2K0RwMXBVNnRaazJ4OW5yMWFFL3JrZGZYOFI4OUdhaUFEaVdkY3U3aXJBZ2lMWUZrNElpNjBFOVBnME1hemdSa1xuICBoMFJyRW5jYnlvWDhUMWNlS0tEdEpGcHpURHRKYXpZZ3V6WjZTeTVRM21PNG9FQnI3WWNOak9sbkwxWUJaSThtdWx2b0QxRHV5WW5BXG4gIDBJMVNmOU9peGxQcEt3SHlkQUd2YlFSYWxPbS93SEp0V0FTRnRpSHBvVTI1c3gwckF2TDJjQkFvS3RyZ3BqL0srZ3JvdEY3OXFaUStcbiAgMjMwRlFOWWZEdlJnV1FVQVpGblgwZkFNQlFBa1EyWHFXRllCQUZuV2RUUThRd0VBeVZDWk9wWlZBRUNXZFIwTnoxQUFRREpVcG81bFxuICBGUUNRWlYxSHd6TVVBSkFNbGFsaldRVUFaRm5YMGZBTUJRQWtRMlhxV0ZZQkFGbldkVFE4UXdFQXlWQ1pPcFpWQUVDV2RSME56MUFBXG4gIFFESlVwbzVsRlFDUVpWMUh3ek1VQUpBTWxhbGpXUVVBWkZuWDBmQU1CUUFrUTJYcVdGWUJBRm5XZFRROFF3RUF5VkNaT3BaVkFFQ1dcbiAgZFIwTnoxQUFRREpVcG81bEZRQ1FaVjFId3pNVUFKQU1sYWxqV1FVQVpGblgwZkFNQlFBa1EyWHFXRllCQUZuV2RUUThRd0VBeVZDWlxuICBPcFpWQUVDV2RSME56MUFBUURKVXBvNWxGUUNRWlYxSHd6TVVBSkFNbGFsaldRVUFaRm5YMGZBTUJRQWtRMlhxV0ZZQkFGbldkVFE4XG4gIFF3RUF5VkNaT3BaVjRGK2NmMjduUkpWVVZBQUFBQUJKUlU1RXJrSmdnZz09YDsgLy8g5oeS5Yqg6L2957yp55Wl5Zu+dXJsXG4gIG5hdGl2ZUVsZW1lbnQ6IEhUTUxJbWFnZUVsZW1lbnQ7IC8vIEhUTUxJbWFnZUVsZW1lbnTlrp7kvotcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9lbGVtZW50UmVmOiBFbGVtZW50UmVmPEhUTUxJbWFnZUVsZW1lbnQ+KSB7XG4gICAgdGhpcy5uYXRpdmVFbGVtZW50ID0gdGhpcy5fZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50O1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgLy8g5oeS5Yqg6L295pe26LWL5YC8dXJsXG4gICAgaWYgKHRoaXMubGF6eUxvYWRTcmMpIHtcbiAgICAgIHRoaXMubmF0aXZlRWxlbWVudC5zcmMgPSB0aGlzLnRodW1ibmFpbFNyYztcbiAgICAgIHRoaXMubmF0aXZlRWxlbWVudC5kYXRhc2V0LmxhenlMb2FkU3JjID0gdGhpcy5sYXp5TG9hZFNyYztcbiAgICB9XG4gIH1cbn1cblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW3ZpZXdlcl0nLFxufSlcbmV4cG9ydCBjbGFzcyBWaWV3ZXJEaXJlY3RpdmUgaW1wbGVtZW50cyBBZnRlckNvbnRlbnRJbml0LCBPbkRlc3Ryb3kge1xuICB2aWV3ZXI6IGFueSA9IG51bGw7IC8vIHZpZXdlcuWunuS+i1xuICBwcml2YXRlIF9zdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjsgLy8g55So5LqOdW5zdWJzY3JpYmVcblxuICBASW5wdXQoKSBpc0xhenlMb2FkID0gZmFsc2U7IC8vIOaYr+WQpuaHkuWKoOi9veWbvueJh1xuICBASW5wdXQoKSBtYXhTaG93TnVtID0gSW5maW5pdHk7IC8vIOacgOWkp+aYvuekuuaVsOmHj1xuICBAQ29udGVudENoaWxkcmVuKFZpZXdlckltZ0RpcmVjdGl2ZSwgeyBkZXNjZW5kYW50czogdHJ1ZSB9KSB2aWV3ZXJJbWdzOiBRdWVyeUxpc3Q8Vmlld2VySW1nRGlyZWN0aXZlPjsgLy8g5b2Tdmlld2VySW1nc+aUueWPmOaXtuiHquWKqOabtOaWsHZpZXdlclxuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2VsZW1lbnRSZWY6IEVsZW1lbnRSZWYpIHt9XG5cbiAgbmdBZnRlckNvbnRlbnRJbml0KCkge1xuICAgIHRoaXMuaW5pdFZpZXdlcigpO1xuXG4gICAgdGhpcy5fc3Vic2NyaXB0aW9uID0gdGhpcy52aWV3ZXJJbWdzLmNoYW5nZXMuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIC8vIOetieW+hURPTeabtOaWsFxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuaW5pdFZpZXdlcigpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5fc3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLl9zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gIH1cblxuICBpbml0Vmlld2VyKCkge1xuICAgIGxldCBpbWdFbGVtZW50czogSFRNTENvbGxlY3Rpb247XG4gICAgLy8g5Zug5Li6cmVhZHnkuovku7blj6rkvJrmiafooYzkuIDpgY3vvIzmlYXph4fnlKhkZXN0cm955YaNbmV355qE5pa55rOV77yMdXBkYXRl5pa55rOV5LiN6YCC55SoXG4gICAgaWYgKHRoaXMudmlld2VyKSB7XG4gICAgICB0aGlzLnZpZXdlci5kZXN0cm95KCk7XG4gICAgfVxuICAgIHRoaXMudmlld2VyID0gbmV3IFZpZXdlcih0aGlzLl9lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsIHtcbiAgICAgIHJlYWR5OiAoKSA9PiB7XG4gICAgICAgIGltZ0VsZW1lbnRzID0gdGhpcy52aWV3ZXIuaW1hZ2VzIHx8IFtdO1xuXG4gICAgICAgIC8vIOe7mXNyY+i1i+WAvOaHkuWKoOi9vXVybFxuICAgICAgICBpZiAodGhpcy5pc0xhenlMb2FkKSB7XG4gICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBwcmVmZXItZm9yLW9mXG4gICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGltZ0VsZW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGltZ0VsZW1lbnRzW2luZGV4XSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xuICAgICAgICAgICAgZWxlbWVudC5zcmMgPSBlbGVtZW50LmRhdGFzZXQubGF6eUxvYWRTcmMgYXMgc3RyaW5nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIHZpZXdlcuWIneWni+WMluWQjuaJjeaciXZpZXdlci5pbWFnZXNcbiAgICBpbWdFbGVtZW50cyA9IHRoaXMudmlld2VyLmltYWdlcyB8fCBbXTtcblxuICAgIC8vIOi2hei/h+acgOWkp+aVsOmHj+eahOS4jeaYvuekulxuICAgIGZvciAobGV0IGluZGV4ID0gdGhpcy5tYXhTaG93TnVtOyBpbmRleCA8IGltZ0VsZW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgY29uc3QgZWxlbWVudCA9IGltZ0VsZW1lbnRzW2luZGV4XSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xuICAgICAgZWxlbWVudC5oaWRkZW4gPSB0cnVlO1xuICAgIH1cbiAgfVxufVxuXG5ATmdNb2R1bGUoe1xuICBkZWNsYXJhdGlvbnM6IFtWaWV3ZXJEaXJlY3RpdmUsIFZpZXdlckltZ0RpcmVjdGl2ZV0sXG4gIGV4cG9ydHM6IFtWaWV3ZXJEaXJlY3RpdmUsIFZpZXdlckltZ0RpcmVjdGl2ZV0sXG59KVxuZXhwb3J0IGNsYXNzIFZpZXdlckRpcmVjdGl2ZU1vZHVsZSB7fVxuIl19