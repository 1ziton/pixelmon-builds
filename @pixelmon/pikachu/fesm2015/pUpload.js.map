{"version":3,"file":"pUpload.js","sources":["ng://@pixelmon/pikachu/upload/upload-interface.ts","ng://@pixelmon/pikachu/upload/upload.component.ts","ng://@pixelmon/pikachu/upload/upload.module.ts"],"sourcesContent":["import { Observable } from 'rxjs';\n\nexport interface BosConfig {\n  endpoint: string; // BOSæå¡å¨çå°å\n  ak: string; // STSæå¡å¨ä¸åçä¸´æ¶ak\n  sk: string; // STSæå¡å¨ä¸åçä¸´æ¶sk\n  sessionToken: string; // STSæå¡å¨ä¸åçsessionToken\n}\n\nexport abstract class UploadServiceToken {\n  abstract bosConfig: BosConfig; // ç¾åº¦bosä¸ä¼ çè®¾ç½®åæ°\n  abstract workerUrl: string; // Workerçå°å\n  abstract getConfig(): Observable<BosConfig>; // è·åtokençé»è¾\n}\n","/**\n * @Description: ä¸ä¼ ç»ä»¶ï¼é»è®¤ä½¿ç¨ç¾åº¦baidubceçå¯¹è±¡å­å¨bosä¸ä¼ \n * Webç«¯ç´ä¼ å®è·µï¼https://cloud.baidu.com/doc/BOS/s/9jwvys8y7/\n * @Author: zomixi\n * @Date: 2019-07-22 15:44:37\n */\n\nimport { Component, OnInit, Input, TemplateRef, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\nimport { UploadFile, UploadXHRArgs, UploadFilter } from 'ng-zorro-antd';\nimport { Observable, Subscription } from 'rxjs';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { HttpResponse, HttpErrorResponse } from '@angular/common/http';\nimport { uuidv1 } from '@pixelmon/util';\nimport { UploadServiceToken } from './upload-interface';\n\ndeclare const baidubce: any;\n\n@Component({\n  selector: 'p-upload',\n  exportAs: 'pUpload',\n  templateUrl: './upload.component.html',\n  styleUrls: ['./upload.component.less'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: UploadComponent,\n      multi: true,\n    },\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class UploadComponent implements OnInit, ControlValueAccessor {\n  @Input() accept = 'image/png,image/jpeg,image/gif,image/bmp'; // æ¥åä¸ä¼ çæä»¶ç±»å, è¯¦è§https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#accept\n  @Input() action = ''; // ä¸ä¼ çå°å\n  @Input() directory = false; // æ¯å¦æ¯æä¸ä¼ æä»¶å¤¹\n  @Input() disabled = false; // æ¯å¦ç¦ç¨\n  @Input() limit = 9; // éå¶åæ¬¡æå¤ä¸ä¼ æ°éï¼nzMultiple æå¼æ¶ææï¼0 è¡¨ç¤ºä¸é\n  @Input() size = 0; // éå¶æä»¶å¤§å°ï¼åä½ï¼KBï¼0 è¡¨ç¤ºä¸é\n  @Input() fileType = 'image/png,image/jpeg,image/gif,image/bmp'; // éå¶æä»¶ç±»åï¼ä¾å¦ï¼image/png,image/jpeg,image/gif,image/bmp\n  @Input() listType: 'text' | 'picture' | 'picture-card' = 'picture-card'; // ä¸ä¼ åè¡¨çåå»ºæ ·å¼ï¼æ¯æä¸ç§åºæ¬æ ·å¼\n  @Input() multiple = true; // æ¯å¦æ¯æå¤éæä»¶ï¼ie10+ æ¯æ\n  @Input() showButton = true; // æ¯å¦å±ç¤ºä¸ä¼ æé®\n  @Input() placeholder = 'ä¸ä¼ '; // å ä½æç¤ºè¯­\n  @Input() customContent: TemplateRef<any>; // èªå®ä¹content\n  @Input() maxLength = Infinity; // æå¤ä¸ä¼ æ°\n\n  @Input() bucket = 'bucket'; // ç¾åº¦BOSä¸çå½åç©ºé´\n  @Input() fastUpload = true; // æ¯å¦ä½¿ç¨å¿«ä¼ \n\n  @Input() filter: UploadFilter[] = [\n    {\n      name: 'maxLength',\n      fn: fileList => {\n        // éå¶æå¤§ä¸ä¼ æ°é\n        return fileList.slice(0, this.maxLength - this.fileList.length);\n      },\n    },\n  ];\n\n  // æ¯å¦æ¾ç¤ºé¢è§å¾æ \n  @Input() set showPreviewIcon(value: boolean) {\n    this.showUploadList = { ...this.showUploadList, showPreviewIcon: value };\n  }\n\n  // æ¯å¦æ¾ç¤ºå é¤å¾æ \n  @Input() set showRemoveIcon(value: boolean) {\n    this.showUploadList = { ...this.showUploadList, showPreviewIcon: value };\n  }\n\n  // æ¯å¦æ¾ç¤ºé¢è§å¾æ åå é¤å¾æ \n  showUploadList = {\n    showPreviewIcon: true,\n    showRemoveIcon: true,\n    hidePreviewIconInNonImage: true, // ä¸æ¯å¾çæ¶éèé¢è§å¾æ \n  };\n\n  private bosClient: any = null; // ç¾åº¦ä¸ä¼ å®¢æ·ç«¯\n  private isSupportWorker = false; // æµè§å¨æ¯å¦æ¯æWorker\n\n  isLoading = false; // ç¾åº¦ä¸ä¼ å®¢æ·ç«¯åå§åä¸­\n  fileList: UploadFile[] = []; // æä»¶åè¡¨ï¼ç»å®ControlValueAccessor\n  fileListChange: (files: UploadFile[]) => void; // æä»¶åè¡¨æ¹åï¼ç»å®ControlValueAccessor\n\n  // é¢è§modalåæ°å¯¹è±¡\n  previewModal = {\n    visible: false, // æ¯å¦æ¾ç¤ºé¢è§modal\n    image: '', // é¢è§å¾ç\n  };\n\n  // ä¸ä¼ æä»¶ä¹åçé©å­,è¥è¿å false ååæ­¢ä¸ä¼ ãæ³¨æï¼å¡å¿ä½¿ç¨ => å®ä¹å¤çæ¹æ³\n  @Input() beforeUpload: (file: UploadFile, fileList: UploadFile[]) => boolean | Observable<boolean>;\n\n  // ç¹å»ç§»é¤æä»¶æ¶çåè°ï¼è¿åå¼ä¸º false æ¶ä¸ç§»é¤ãæ³¨æï¼å¡å¿ä½¿ç¨ => å®ä¹å¤çæ¹æ³ã\n  @Input() remove: (file: UploadFile) => boolean | Observable<boolean>;\n\n  // ç¹å»æä»¶é¾æ¥æé¢è§å¾æ æ¶çåè°ï¼æ³¨æï¼å¡å¿ä½¿ç¨ => å®ä¹å¤çæ¹æ³\n  @Input() preview: (file: UploadFile) => void = (file: UploadFile) => {\n    this.previewModal.image = file.url! || file.thumbUrl!;\n    this.previewModal.visible = true;\n    this._cdr.detectChanges();\n  };\n\n  // éè¿è¦çé»è®¤çä¸ä¼ è¡ä¸ºï¼å¯ä»¥èªå®ä¹èªå·±çä¸ä¼ å®ç°ï¼æ³¨æï¼å¡å¿ä½¿ç¨ => å®ä¹å¤çæ¹æ³\n  @Input() customRequest: (subject: UploadXHRArgs) => Subscription = uploadSubject => {\n    const uploadFile = uploadSubject.file;\n\n    // uploadKeyç¨äºæ è¯æä»¶å¯ä¸æ§ï¼å¦æéå¤Putåä¸ä¸ªkeyçObjectï¼ä¹åä¸ä¼ çæ°æ®å°è¢«è¦ç\n    this.getUploadKey(uploadFile).then(uploadKey => {\n      // å°è¯ç§ä¼ \n      if (this.isSupportWorker && this.fastUpload) {\n        // åç¨HEADè¯·æ±æ ¹æ®keyå¤æ­æ¯å¦å·²ä¸ä¼ è¿è¯¥æä»¶\n        this.bosClient\n          .getObjectMetadata(this.bucket, uploadKey)\n          .then(event => {\n            // ä¸ä¼ è¿äºï¼ç´æ¥åæ¾\n            uploadFile.url = `${this.bosClient.config.endpoint}/v1/${this.bucket}/${uploadKey}`;\n            uploadSubject.onSuccess!('ä¸ä¼ æå', uploadFile, event);\n          })\n          .catch(\n            // æ²¡æä¸ä¼ è¿ï¼ä½¿ç¨ç¾åº¦bosç´ä¼ \n            () => this.bosUpload(uploadSubject, this.bucket, uploadKey, uploadFile),\n          );\n      } else {\n        // ç¾åº¦bosç´ä¼ \n        this.bosUpload(uploadSubject, this.bucket, uploadKey, uploadFile);\n      }\n    });\n\n    // ZORROè¦æ±è¿åä¸ä¸ªSubscription\n    return new Subscription();\n  };\n\n  constructor(private _cdr: ChangeDetectorRef, private _uploadSrv: UploadServiceToken) {\n    this.initBosClient();\n  }\n\n  ngOnInit() {\n    // å¤æ­æ¯å¦æ¯æWorker\n    if (typeof Worker !== 'undefined') {\n      this.isSupportWorker = true;\n    } else {\n      if (this.fastUpload) {\n        console.error('æµè§å¨ä¸æ¯æWorkerï¼æ æ³ä½¿ç¨å¿«ä¼ ï¼');\n      }\n    }\n  }\n\n  writeValue(value) {\n    this.fileList = value || [];\n    this.fileList.forEach(file => {\n      file.uid = file.uid || uuidv1();\n    });\n    this._cdr.detectChanges(); // for issueï¼https://github.com/angular/angular/issues/10816\n  }\n\n  registerOnChange(fn: any) {\n    this.fileListChange = fn;\n  }\n\n  registerOnTouched() {}\n\n  // åå§åç¾åº¦ä¸ä¼ å®¢æ·ç«¯\n  initBosClient() {\n    if (this._uploadSrv.getConfig()) {\n      this.isLoading = true;\n      this._uploadSrv.getConfig()!.subscribe(config => {\n        this.bosClient = new baidubce.sdk.BosClient({\n          endpoint: config.endpoint,\n          credentials: {\n            ak: config.ak,\n            sk: config.sk,\n          },\n          sessionToken: config.sessionToken,\n        });\n        this.isLoading = false;\n        this._cdr.detectChanges();\n      });\n    }\n  }\n\n  getUploadKey(file: UploadFile): Promise<string> {\n    return new Promise(resolve => {\n      // ä½¿ç¨Worker\n      if (this.isSupportWorker && this.fastUpload) {\n        const worker = new Worker(this._uploadSrv.workerUrl);\n\n        worker.onerror = error => {\n          console.error('Workerå¼å¸¸ï¼å·²å³é­ï¼', error);\n          worker.terminate();\n        };\n\n        worker.postMessage(file);\n\n        worker.onmessage = event => {\n          // ä½¿ç¨æä»¶md5+æåä¿®æ¹æ¶é´+æä»¶å¤§å°+æä»¶åæ¥ä¿è¯å¯ä¸æ§ï¼åæ¶ç¸åçæä»¶çkeyä¹ä¼ç¸å,ç¨äºç§ä¼ \n          const key = `${event.data}${file.lastModified}${file.size}${file.name}`;\n          resolve(key);\n          worker.terminate();\n        };\n      } else {\n        // ä¸ä½¿ç¨Worker\n        // ä½¿ç¨å½åæ¶é´+åä½éæºç +æåä¿®æ¹æ¶é´+æä»¶å¤§å°+æä»¶åæ¥ä¿è¯å¯ä¸æ§ï¼æ­¤æ¶å ä¸ºç¸åæä»¶keyä¹ä¼ä¸åï¼æå®ç°ä¸äºç§ä¼ \n        const random = `${new Date().getTime()}${(Math.random() * 10000).toFixed(0)}`;\n        const key = `${random}${file.lastModified}${file.size}${file.name}`;\n        resolve(key);\n      }\n    });\n  }\n\n  // ä½¿ç¨ç¾åº¦bosç´ä¼ \n  bosUpload(uploadSubject: UploadXHRArgs, bucket: string, uploadKey: string, uploadFile: UploadFile) {\n    this.bosClient\n      .putObjectFromBlob(bucket, uploadKey, uploadFile)\n      .then((event: HttpResponse<{}>) => {\n        uploadFile.url = `${this.bosClient.config.endpoint}/v1/${bucket}/${uploadKey}`;\n        uploadSubject.onSuccess!('ä¸ä¼ æå', uploadFile, event);\n      })\n      .catch((event: HttpErrorResponse) => {\n        uploadSubject.onError!(event, uploadFile);\n      });\n  }\n\n  onFileListChange() {\n    // å»é¤ç¼©ç¥å¾ï¼å ä¸ºç¼©ç¥å¾å¤ªå¤§,è¦æ¯å¤é¨ä¸å¤çä¼å½±åHttpè¯·æ±éåº¦\n    this.fileListChange(this.fileList.map(file => ({ ...file, thumbUrl: '' })));\n    this._cdr.detectChanges();\n  }\n\n  onChange() {\n    // èµå¼url\n    this.fileList.forEach(file => {\n      file.url = file.url || (file.originFileObj && (file.originFileObj as any).url);\n    });\n    this.onFileListChange();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { UploadComponent } from './upload.component';\nimport { NzUploadModule } from 'ng-zorro-antd/upload';\nimport { NzSpinModule } from 'ng-zorro-antd/spin';\nimport { NzModalModule } from 'ng-zorro-antd/modal';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\n\n@NgModule({\n  declarations: [UploadComponent],\n  imports: [CommonModule, NzUploadModule, NzModalModule, NzSpinModule, NzButtonModule, NzIconModule],\n  exports: [UploadComponent],\n})\nexport class UploadModule {}\n"],"names":[],"mappings":"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"}